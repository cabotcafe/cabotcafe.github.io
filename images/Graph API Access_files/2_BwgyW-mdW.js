/*!CK:922489843!*//*1439503031,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["J8Ldk"]); }

__d("ShareNowCounterEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SHARE_NOW_NOT_AVAILABLE:"share_now_not_available",OPEN_SHARE_NOW:"open_share_now",OPEN_DIALOG:"open_dialog",OPEN_MESSAGE_DIALOG:"open_mesage_dialog",SHARE_CREATED:"share_created",SHARE_NOW_CREATED:"share_now_created",SHARE_ERROR:"share_error",SHARE_INVOKE_ERROR:"share_invoke_error",SHARE_INVOKED:"share_invoked",SHARE_BOOTLOADED:"share_bootloaded",SHARE_POST:"share_post",SHARE_POST_ERROR:"share_post_error",SHARE_POST_SUCCESS:"share_post_success",NO_FOOTER_REF:"no_footer_ref",NO_PRIVACY_NODE:"no_privacy_node",NO_PRIVACY_REF:"no_privacy_ref",NO_PRIVACY_VALUE:"no_privacy_value",NO_PRIVACY_VALUE_ADAMA:"no_privacy_value_adama",SHARE_POST_OWN:"share_post_own",SHARE_POST_PERSON:"share_post_person",SHARE_POST_PAGE:"share_post_page",SHARE_POST_GROUP:"share_post_group",SHARE_POST_MESSAGE:"share_post_message",SHARE_ERROR_OWN:"share_error_own",SHARE_ERROR_PERSON:"share_error_person",SHARE_ERROR_PAGE:"share_error_page",SHARE_ERROR_GROUP:"share_error_group",SHARE_ERROR_MESSAGE:"share_error_message",SHARE_CREATED_OWN:"share_created_own",SHARE_CREATED_PERSON:"share_created_person",SHARE_CREATED_PAGE:"share_created_page",SHARE_CREATED_GROUP:"share_created_group",SHARE_CREATED_MESSAGE:"share_created_message"};},null,{});
__d('NotificationCounter',['Arbiter','ChatConfig','DocumentTitle','FavIcon','JSLogger','UserActivity'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={messages:0,notifications:0,requests:0},o;if(i.get('unreadFavicon'))k.setToggleResources(i.get('unreadFaviconURL'));var p={init:function(q){h.subscribe('update_title',this._handleUpdate.bind(this));h.subscribe('jewel/count-updated',this._handleCountUpdate.bind(this));},getCount:function(){var q=0;for(var r in n){var s=Number(n[r]);if(typeof n[r]=='string'&&isNaN(s))return n[r];if(isNaN(s)||s<0){l.create('jewels').error('bad_count',{jewel:r,count:n[r]});continue;}q+=s;}return q;},updateTitle:function(){var q=this.getCount(),r=j.get();r=q?'('+q+') '+r:r;j.set(r,true);if(i.get('unreadFavicon')){if(!m.isOnTab()&&(o>0&&q===0||o===0&&q>0||o>0&&!k.isToggledResource()))k.toggle();o=q;}},_handleCountUpdate:function(q,r){n[r.jewel]=r.count;this.updateTitle();},_handleUpdate:function(q,r){this.updateTitle();}};f.exports=p;},null);
__d("XNotificationsSyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/sync\/",{lastSync:{type:"Int",required:true}});},null,{});
__d('NotificationSync',['Arbiter','AsyncRequest','ChannelConstants','JSLogger','NotificationConstants','NotificationUpdates','XNotificationsSyncController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=k.create('notifications'),p='channel_reload',q=0;function r(w){var x=m.getserverTime()?m.getserverTime():q,y=n.getURIBuilder().setInt('lastSync',x).getURI();w.setHandler(s).setOption('suppressErrorAlerts',true).setErrorHandler(t).setMethod('GET').setReadOnly(true).setURI(y).setAllowCrossPageTransition(true);}function s(w){var x=w.getPayload();if(x.syncPayload)m.handleUpdate(l.PayloadSourceType.SYNC,x.syncPayload);}function t(w){}function u(){var w=new i();w.setIsBackgroundRequest(true);r(w);w.send();o.bump(p);}var v={setup:function(w){q=w;h.subscribe(j.ON_INVALID_HISTORY,u);}};f.exports=v;},null);
__d('NotificationJewelController',['Arbiter','Event','NotificationConstants','NotificationCounter','NotificationSeenState','NotificationSync','NotificationUpdates','createObjectFrom','curry'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=0;function r(t){h.inform('jewel/count-updated',{jewel:t,count:l.getUnseenIDs().length},h.BEHAVIOR_STATE);}function s(t,u,v,w){'use strict';var x=null;if(u.list&&u.unseenNotifs&&u.startTime){x=u.list;v=u.unseenNotifs;w=u.startTime;}else x=u;k.init();var y=i.listen(t.getRoot(),'mouseover',function(){y.remove();y=null;x.open();});if(t.isOpen()){x.open();}else var z=t.subscribe('opened',function(){z.unsubscribe();z=null;x.open();});var aa=x.pause.bind(x);t.subscribe('opened',function(){setTimeout(aa,0);r(t.name);});t.subscribe('closed',function(){x.unpause();r(t.name);});n.subscribe('seen-state-updated',p(r,t.name));n.handleUpdate(j.PayloadSourceType.INITIAL_LOAD,{seenState:o(v,q)});m.setup(w);r(t.name);}f.exports=s;},null);
__d('NotificationJewelHeaderController',['DOM','Event','NotificationSeenState','NotificationUserActions','NotificationUpdates'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n,o){'use strict';i.listen(n,'click',function(){var p=j.getUnreadIDs();if(p.length)k.markNotificationsAsRead(p);});l.subscribe('read-state-updated',function(){if(o)h.setContent(o,j.getUnreadCount());});}f.exports=m;},null);
__d('NotificationJewelList.react',['Animation','Event','LoadingIndicator.react','NotificationListPropTypes','NotificationListItem.react','React','ScrollableArea.react','Vector','cx','debounce','fbt','getObjectValues','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=Object.assign||function(ba){for(var ca=1;ca<arguments.length;ca++){var da=arguments[ca];for(var ea in da)if(Object.prototype.hasOwnProperty.call(da,ea))ba[ea]=da[ea];}return ba;},v=160,w=530,x=40,y=64,z=430,aa=m.createClass({displayName:'NotificationJewelList',propTypes:k,_isLoadingIndicatorVisible:function(){var ba=this.refs.loading;if(!ba)return false;var ca=m.findDOMNode(this.refs.scrollable),da=o.getElementDimensions(ca).y;if(da===0)return false;var ea=o.getElementPosition(ca).y+da,fa=o.getElementPosition(m.findDOMNode(ba)).y;fa-=x;return fa<ea;},_calculateHeight:function(){var ba=o.getViewportDimensions().y,ca=Math.min(this.props.maxHeight||w,ba-v);if(this.props.upsell)return Math.max(ca-y,0);return ca;},_keepOnLoading:function(){if(this.isMounted())this.props.afterScroll(this._isLoadingIndicatorVisible());},_renderItems:function(){return s(this.props.notifs).map((function(ba){var ca=ba.alert_id;return (m.createElement(l,u({key:ca,visible:!this.props.hiddenState[ca],isRead:this.props.readState[ca],gnfGiven:this.props.gnfState[ca],negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,useChevron:this.props.useChevron,onChevronShow:this.props.onChevronShow,onChevronHide:this.props.onChevronHide,paused:this.props.paused,parent:this},ba)));}).bind(this));},componentDidMount:function(){var ba=m.findDOMNode(this.refs.scrollable);i.listen(window,'resize',q((function(){if(!t(this.props.notifs))new h(ba).to('height',this._calculateHeight()+'px').duration(100).go();}).bind(this)));},componentDidUpdate:function(ba){if(this.props.paused&&!ba.paused)if(this.props.shouldScroll&&this.refs.scrollable)this.refs.scrollable.getArea().scrollToTop(false);setTimeout(this._keepOnLoading,0);},render:function(){var ba=this.props.notifs,ca=null,da=null,ea=z,fa=null;if(!t(ba)){ca=m.createElement('ul',{'data-gt':this.props.tracking},this._renderItems());da=this._calculateHeight();}else if(!this.props.canFetchMore)ca=m.createElement('div',{className:"_572e"},r._("No new notifications"));if(this.props.canFetchMore)fa=m.createElement(j,{color:"white",size:"small",ref:"loading",className:"_33i"});var ga=null;if(this.props.upsell){var ha=this.props.upsell.module;ga=m.createElement(ha,this.props.upsell.props);}var ia=' '+"_50-t"+(this.props.showingChevron?' '+"_2iy1":'');return (m.createElement('div',{className:ia},m.createElement(n,{ref:"scrollable",width:ea,height:da,fade:true,persistent:true,onScroll:q(this._keepOnLoading)},ca,fa),ga));}});f.exports=aa;},null);
__d('NotificationJewelListController',['NotificationList.react','NotificationJewelList.react','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';this.$NotificationJewelListController1=l;this.$NotificationJewelListController2=m;this.$NotificationJewelListController3=false;this.$NotificationJewelListController4=false;this.$NotificationJewelListController5();}k.prototype.open=function(){'use strict';this.$NotificationJewelListController3=true;this.$NotificationJewelListController5();};k.prototype.pause=function(){'use strict';this.$NotificationJewelListController4=true;this.$NotificationJewelListController5();};k.prototype.unpause=function(){'use strict';this.$NotificationJewelListController4=false;this.$NotificationJewelListController5();};k.prototype.$NotificationJewelListController5=function(){'use strict';j.render(j.createElement(h,{hasEverBeenOpened:this.$NotificationJewelListController3,paused:this.$NotificationJewelListController4,tracking:this.$NotificationJewelListController2.tracking,negativeTracking:this.$NotificationJewelListController2.negativeTracking,shortenTimestamp:this.$NotificationJewelListController2.shortenTimestamp,businessID:this.$NotificationJewelListController2.businessID,maxHeight:this.$NotificationJewelListController2.maxHeight,useChevron:this.$NotificationJewelListController2.useChevron,numPerPage:5,listRenderer:i,upsell:this.$NotificationJewelListController2.upsell||null}),this.$NotificationJewelListController1);};f.exports=k;},null);
__d('EntstreamInjectWarning',['CSS','DOM'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k={init:function(l){j=l;},showWarning:function(l){if(j){h.show(j);i.setContent(j,l);}}};f.exports=k;},null);
__d('EntstreamStoryDeduper',['DOM','csx','CSS'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n){var o={};for(var p=0;p<m.length;p++){var q=m[p],r=q.getAttribute('data-dedupekey');if(o[r]){if(n){j.hide(q);}else h.remove(q);}else o[r]=1;}}var l={dedupe:function(m,n){n=n||"._5jmm";var o=h.scry(m,n);o=o.filter(function(p){return p.getAttribute('data-dedupekey');});k(o,false);},dedupeHide:function(m,n){n=n||"._5jmm";var o=h.scry(m,n),p=o.filter(function(q){return q.getAttribute('data-dedupekey')&&j.shown(q);});k(p,true);}};f.exports=l;},null);
__d('AccessibilityLogger',['AsyncSignal','Cookie'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={COOKIE:'a11y',DECAY_MS:6*60*60*1000,DEFAULT:{sr:0,'sr-ts':Date.now(),jk:0,'jk-ts':Date.now(),kb:0,'kb-ts':Date.now(),hcm:0,'hcm-ts':Date.now()},getCookie:function(){var k=j.DEFAULT,l=i.get(j.COOKIE);if(l){l=JSON.parse(l);for(var m in k)if(m in l)k[m]=l[m];}return k;},logKey:function(k,l){var m=j.getCookie();m[k]++;var n=Date.now();if(n-m[k+'-ts']>j.DECAY_MS){new h('/ajax/accessibilitylogging',{eventName:l,times_pressed:m[k]}).send();m[k+'-ts']=n;m[k]=0;}i.set(j.COOKIE,JSON.stringify(m));},logHCM:function(){j.logKey('hcm','hcm_users');},logSRKey:function(){j.logKey('sr','sr_users');},logJKKey:function(){j.logKey('jk','jk_users');},logFocusIn:function(){j.logKey('kb','kb_users');}};f.exports=j;},null);
__d('LikeConfirmer',['AsyncDialog','AsyncRequest'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=false,k=false,l={likeContent:function(){},like:function(m,n){this.likeContent=m;if(k)return;if(j){this.likeContent();}else{var o=new i().setURI('/like/confirm_like.php').setRelativeTo(n);h.send(o,(function(p){k=true;p.subscribe('hide',this.onCloseLikeConfirmDialog.bind(this));p.setCausalElement(n);}).bind(this));}return false;},isShowingConfirmation:function(){return k;},onCloseLikeConfirmDialog:function(){k=false;},likeSkipConfirmation:function(m){j=m;this.likeContent();}};f.exports=l;},null);
__d('FeedBaseKeyboardController',['$','AccessibilityLogger','Arbiter','AsyncDialog','AsyncRequest','Banzai','BanzaiODS','BanzaiNectar','CSS','DOM','DOMScroll','DOMQuery','Event','Focus','KeyboardShortcuts','LikeConfirmer','NavigationMessage','Parent','ReactComposerEvents','ReactComposerIDGenerator','Run','Scroll','SubscriptionsHandler','UITinyViewportAction','Vector','ViewportBounds','csx','emptyFunction','ge','getActiveElement','isAsyncScrollQuery','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){if(c.__markCompiled)c.__markCompiled();var na;function oa(){na=ea.isTiny()?0:h('pagelet_bluebar').offsetTop+h('pagelet_bluebar').offsetHeight;}setTimeout(oa,0);t.listen(window,'resize',ma(oa));function pa(qa){'use strict';this.root=qa;this.init();}pa.prototype.getStories=function(){'use strict';};pa.prototype.getParentStory=function(qa){'use strict';};pa.prototype.isStory=function(qa){'use strict';};pa.prototype.isHoldoutStory=function(qa){'use strict';};pa.prototype.getHeadline=function(qa){'use strict';};pa.prototype.getPreviousStory=function(qa){'use strict';};pa.prototype.getNextStory=function(qa){'use strict';};pa.prototype.setSelected=function(qa,ra){'use strict';};pa.prototype.clickLike=function(){'use strict';};pa.prototype.clickComment=function(){'use strict';};pa.prototype.clickShare=function(){'use strict';};pa.prototype.clickSeeMore=function(){'use strict';};pa.prototype.clickLeft=function(){'use strict';};pa.prototype.clickRight=function(){'use strict';};pa.prototype.openAttachment=function(){'use strict';};pa.prototype.focusComposer=function(){'use strict';var qa=ja('pagelet_composer');if(!qa)qa=ja('pagelet_group_composer');if(qa){var ra=q.scry(qa,'textarea')[0];if(ra){u.set(ra);r.scrollToTop(true);}else{var sa=q.scry(qa,"div._36bx")[0],ta=sa&&sa.id;if(aa.isComposerID(ta)){j.inform(z.FOCUS,{composerID:sa.id});r.scrollToTop(true);}}}};pa.prototype.getScrollOffset=function(){'use strict';return 10;};pa.prototype.getAnimationLength=function(qa){'use strict';return Math.min(Math.abs(fa.getElementPosition(qa).y-ga.getTop()-ca.getTop(document.body)),400);};pa.prototype.findTop=function(){'use strict';var qa=this.getStories();for(var ra=0;ra<qa.length;ra++)if(fa.getElementPosition(qa[ra]).y>fa.getScrollPosition().y)return qa[ra];};pa.prototype.onLeave=function(){'use strict';this.subscriptions&&this.subscriptions.release();};pa.prototype.getHelpDialogRequest=function(){'use strict';if(!this.dialogRequest){this.dialogRequest=new l('/ajax/keyboard_shortcuts');this.dialogRequest.setReadOnly(true);}else if(this.dialogRequest.transport)return null;return this.dialogRequest;};pa.prototype.init=function(){'use strict';ba.onLeave(this.onLeave.bind(this));this.subscriptions=new da();this.subscriptions.addSubscriptions(j.subscribe(x.NAVIGATION_BEGIN,this.onLeave.bind(this)),v.register('j',this.vert.bind(this,1)),v.register('k',this.vert.bind(this,-1)),v.register('l',(function(){var qa=this.getParentStory(ka());w.like((function(){this.setSelected(qa,false);this.clickLike();}).bind(this),ka());}).bind(this),{filter:this.hasActiveStory.bind(this)}),v.register('c',this.clickComment.bind(this),{filter:this.hasActiveStory.bind(this)}),v.register('o',this.openAttachment.bind(this),{filter:this.hasActiveStory.bind(this)}),v.register('p',this.focusComposer.bind(this)),v.register('s',this.clickShare.bind(this),{filter:this.hasActiveStory.bind(this)}),v.register('SLASH',(function(){var qa=this.getHelpDialogRequest();if(qa){qa.setRelativeTo(ka());k.send(qa);}}).bind(this),{filter:function(event,qa){return event.getModifiers().shift;}}),v.register('RETURN',this.clickSeeMore.bind(this),{filter:this.hasExpandableStoryInFocus.bind(this)}),v.register('LEFT',this.clickLeft.bind(this),{filter:this.hasActiveStory.bind(this)}),v.register('RIGHT',this.clickRight.bind(this),{filter:this.hasActiveStory.bind(this)}),t.listen(this.root,'focusin',(function(event){var qa=event.getTarget();if(!this.isStory(qa)){var ra=qa.nodeName=='OBJECT'||qa.nodeName=='EMBED'||qa.nodeName=='IFRAME',sa=this.getParentStory(qa),ta=this.selected;if(sa&&!ra&&ta){this.setSelected(sa,true);this.selected=sa;}}}).bind(this)));};pa.prototype.hasActiveStory=function(event,qa){'use strict';var ra=ka();return !(ra&&p.shown(ra))||!!this.getParentStory(ra);};pa.prototype.hasExpandableStoryInFocus=function(event,qa){'use strict';var ra=ka();return !!(ra.getElementsByClassName('text_exposed_root').length&&!ra.getElementsByClassName('text_exposed_root text_exposed').length);};pa.prototype.click=function(qa){'use strict';if(!this.selected)return;var ra;for(var sa=0,ta=arguments.length;sa<ta;sa++){ra=q.scry(this.selected,arguments[sa])[0];if(ra&&p.shown(ra)){ra.click();return;}}};pa.prototype.vert=function(qa){'use strict';if(!this.scrollInitialized){this.subscriptions.addSubscriptions(t.listen(document,'scroll',(function(){if(this.selected&&!this.scrolling)this.setSelected(null,false);}).bind(this)));this.scrollInitialized=true;}var ra,sa;if(this.selected){if(m.isEnabled('kbshortcuts_feed')){sa=qa>0?'kbshortcuts.scroll_down':'kbshortcuts.scroll_up';n.bumpEntityKey('kbshortcuts_feed',sa);o.log('feed_scroll',sa,{});}i.logJKKey();if(this.selected.id=='pagelet_composer'){ra=qa>0?this.getStories()[0]:null;if(this.isHoldoutStory(ra))ra=this.getPreviousStory(ra);}else if(qa===0){ra=this.selected;}else ra=qa>0?this.getNextStory(this.selected):this.getPreviousStory(this.selected)||ja('pagelet_composer');if(!ra){return;}else if(!s.isElementNode(ra)){p.removeClass(this.selected,'selectedStorySimple');this.selected=ra;return this.vert(qa);}}if(!ra||y.byClass(ra,'hidden_elem')||!q.contains(document,ra)){ra=this.findTop();if(ra&&qa<0)ra=this.getPreviousStory(ra);if(this.isHoldoutStory(ra))ra=this.getPreviousStory(ra);}if(!ra)return;this.anim&&this.anim.stop();var ta=Date.now()-(this.lastScroll||0)>30;if(qa!==0)var ua=this.setFocused.bind(this,ra);if(la()){ta=false;ua();ua=ia;}this.scrolling=true;this.scrollingTimer&&window.clearTimeout(this.scrollingTimer);this.anim=r.scrollTo(ra,ta?this.getAnimationLength(ra):0,false,fa.getViewportDimensions().y-na-this.getScrollOffset(),0,(function(){this.scrollingTimer=window.setTimeout((function(){this.scrolling=false;}).bind(this),300);var va=fa.getScrollPosition();ua();if(va.distanceTo(fa.getScrollPosition())!==0)r.scrollTo(va,0);}).bind(this));this.setSelected(ra,true);this.lastScroll=Date.now();};pa.prototype.isInteractive=function(qa){'use strict';return qa.nodeName=='INPUT'||qa.nodeName=='BUTTON'||qa.nodeName=='TEXTAREA'||qa.nodeName=='A'||!!y.byAttribute(qa,'contenteditable');};pa.prototype.setTabindexOnHeadline=function(qa,ra){'use strict';if(this.isStory(qa)){var sa=this.getHeadline(qa);if(sa)sa.tabIndex=ra;}};pa.prototype.setTabindexOnStory=function(qa,ra){'use strict';if(this.isStory(qa))qa.tabIndex=ra;};pa.prototype.setFocused=function(qa){'use strict';if(this.isStory(qa))u.setWithoutOutline(qa);};f.exports=pa;},null);
__d('FeedLiveUpdateBar',['ArbiterMixin','Animation','BanzaiScuba','CurrentUser','Ease','DOM','DOMScroll','Event','Vector','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=300,s=false;function t(v){this.element=v;this.init();}function u(v){new j('feed_newstoriescard').addNormal('user_id',k.getID()).addNormal('event',v).addInteger('time',Math.round(Date.now()/1000)).addInteger('bar_at_top',1).post();}Object.assign(t.prototype,h,{init:function(){if(!this.element)return;this.hide();var v=m.find(this.element,"._2f6b");o.listen(v,'click',this._handleClick.bind(this));},_handleClick:function(event){if(s)u('click');this.hide();var v=new p(p.getScrollPosition().x,0,'document');n.scrollTo(v,r,false,false,0,(function(){n.scrollTo(v,0);this.inform('click');}).bind(this));event.kill();},setAtTop:function(){s=true;},hide:function(){s=false;new i(this.element).from('top',42).to('top',-50).ease(l.sineOut()).duration(250).hide().go();},show:function(){if(!this.element)return;new i(this.element).from('top',-50).to('top',42).ease(l.makePowerOut(3)).duration(400).show().go();if(s)u('render');}});f.exports=t;},null);
__d('ContextualHelpSearchController',['Event','AsyncRequest','DOM','CSS','Focus','Input'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=400;function o(){this._token=null;this._timerID=0;this._lastQuery=null;this.typing_listener=null;this.clear_listener=null;this.async_request=null;}Object.assign(o.prototype,{init:function(p,q,r,s,t,u){this.loader=p;this.search_box=q;this.topics_area=r;this.results_area=s;this.clear_button=t;this.typing_listener=h.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=h.listen(this.clear_button,'click',this.clearResults.bind(this));if(u==null||u.focusSearchBox==null||u.focusSearchBox)l.set(this.search_box);},source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';m.reset(this.search_box);l.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}k.addClass(this.clear_button,'hidden_elem');},update:function(){var p=m.getValue(this.search_box);if(p===this._lastQuery)return;this._lastQuery=p;if(p===''){this.clearResults();return;}this.show(this.loader);var q={query:p,width:this._width||n,source:this.source};this.async_request=new i('/help/ajax/search/').setData(q).setHandler((function(r){this._update(r);}).bind(this));this.async_request.send();},_update:function(p){this.async_request=null;var q=p.getPayload().results;j.setContent(this.results_area,q);this.show(this.results_area);if(m.getValue(this.search_box)===''){this.clearResults();}else k.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(p){var q=[this.loader,this.topics_area,this.results_area];for(var r=0;r<q.length;r++)k.addClass(q[r],'hidden_elem');k.removeClass(p,'hidden_elem');}});f.exports=o;},null);
__d('BookmarkFeedSorter',['Run'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j={init:function(k){i=k;h.onLeave(function(){i=null;});},setChecked:function(k){if(i)i.setValue(k);}};f.exports=j;},null);
__d('RequestsJewel',['Animation','AccessibilityLogger','Arbiter','AsyncRequest','AsyncSignal','ChannelConstants','CSS','DOM','Event','LinkController','Parent','ScrollableArea','Vector','$','debounce','ge','shield','fbt','JewelQPLogging','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba=null;aa('FriendBrowserCheckboxController',function(ga){return ba=ga;});var ca=530,da=30,ea=160;Object.assign(fa,{instance:null,getInstance:function(){return fa.instance;},replaceJewelTitle:function(ga,ha){o.setContent(u(ga),ha);},updateFromDOM:function(){if(fa.instance)fa.instance.fromDom();},setInitialHeight:function(){if(fa.instance)fa.instance.setHeight();},maybeLoadJewel:function(){if(fa.instance)fa.instance.maybeLoadJewel();}});function fa(ga,ha,ia){'use strict';fa.instance=this;this.countNew=0;this.jewel=ga;this.jewelFlyoutCase=ga.getRoot();this.jewelFlyout=w('fbRequestsFlyout');this.newCountSpan=w('newRequestCount');this.folder=ha;this.doNewMarkRead=ia;this.openTimestamp=0;this.$RequestsJewel1={};this.$RequestsJewel2=0;this.shouldClearPredictionAssocOnClick=false;var ja=w('requestsMarkReadButton');if(ja)p.listen(ja,'click',x(this.$RequestsJewel3,this));this.jewel.subscribe('marked-seen',x(this.$RequestsJewel4,this));this.jewel.subscribe('closed',x(this.$RequestsJewel5,this));this.jewel.subscribe('updated',this.$RequestsJewel6.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel7.bind(this));q.registerHandler(this.$RequestsJewel8.bind(this));j.subscribe(m.getArbiterType('jewel_requests_add'),this.$RequestsJewel9.bind(this));j.subscribe(m.getArbiterType('jewel_friending_notifs'),this.$RequestsJewel10.bind(this));j.subscribe(m.getArbiterType('jewel_requests_remove_old'),this.$RequestsJewel11.bind(this));j.subscribe(m.getArbiterType('friend_requests_seen'),this.$RequestsJewel12.bind(this));p.listen(this.jewelFlyout,'submit',(function(la){var ma=r.byClass(la.getTarget(),'objectListItem');if(ma){n.removeClass(ma,'jewelItemNew');n.addClass(ma,'jewelItemResponded');}}).bind(this));var ka=o.find(w('fbRequestsJewel'),'a[rel="toggle"]');p.listen(ka,'focus',(function(la){i.logFocusIn();}).bind(this));this.setupScroll();p.listen(window,'resize',v((function(){this.$RequestsJewel13();}).bind(this)));}fa.prototype.setupScroll=function(){'use strict';var ga=o.scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(ga){this.$RequestsJewel14=ga;this.$RequestsJewel15=0;this.$RequestsJewel16=p.listen(ga,'scroll',this.$RequestsJewel17.bind(this),p.Priority.$RequestsJewel18);}};fa.prototype.fromDom=function(){'use strict';o.scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach((function(ga){var ha=ga.getAttribute('id');if(ha){var ia=w(ha+'_status'),ja=this.$RequestsJewel19(ha);if(ja.requester)this.$RequestsJewel1[ja.requester]=ha;++this.$RequestsJewel2;}}).bind(this));this.$RequestsJewel20();};fa.prototype.$RequestsJewel21=function(ga){'use strict';var ha=ga.match(/^(\d+)_(\d+)/);return ha?{requester:ha[1],type:ha[2]}:undefined;};fa.prototype.$RequestsJewel19=function(ga){'use strict';var ha=ga?this.$RequestsJewel21(ga):undefined,ia;if(ha&&ha.requester){ia=parseInt(ha.requester,10);if(isNaN(ia))ia=undefined;}var ja;if(ha&&ha.type){ja=parseInt(ha.type,10);if(isNaN(ja))ja=undefined;}return {requester:ia,type:ja};};fa.prototype.$RequestsJewel22=function(){'use strict';if(this.countNew>0)this.countNew-=1;};fa.prototype.$RequestsJewel8=function(ga,event){'use strict';var ha=r.byClass(ga,'jewelItemNew');if(ha&&r.byClass(ha,'fbRequestList')&&r.byClass(ha,'beeperEnabled')){var ia=this.$RequestsJewel21(ha.id);ia&&this.$RequestsJewel4(ia.requester,ia.type);this.$RequestsJewel22();j.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});n.removeClass(ha,'jewelItemNew');}return true;};fa.prototype.$RequestsJewel23=function(){'use strict';return o.scry(this.jewelFlyout,'.uiScrollableArea')[0];};fa.prototype.$RequestsJewel17=function(){'use strict';var ga=o.scry(this.$RequestsJewel14,'.uiMorePager');if(!ga)return;var ha=ga.pop();if(ha){var ia=t.getElementPosition(ha,'viewport').y;if(ia>0)n.addClass(r.byClass(this.$RequestsJewel14,'uiScrollableArea'),'contentAfter');var ja=o.find(ha,'a');if(!ja)return;var ka=t.getElementPosition(ja,'viewport').y;if(ka==this.$RequestsJewel15)return;var la=t.getElementPosition(this.$RequestsJewel14,'viewport').y+t.getElementDimensions(this.$RequestsJewel14).y;if(ka-300<la&&ka>0){this.$RequestsJewel15=ka;var ma=ja.getAttribute('ajaxify');if(ma){new k(ma).setRelativeTo(ja).setStatusElement(r.byClass(ja,'stat_elem')).send();}else ba&&ba.getInstance('jewel').showMore();}}};fa.prototype.$RequestsJewel10=function(ga,ha){'use strict';if(!ha||this.jewel.isOpen())return;if(ha.obj.notif_type!=='friend_confirmed')return;if(w('fbRequestsJewelLoading')){new k().setURI('/ajax/requests/loader/').send();return;}var ia={};ia.reloadcontent=true;new k().setURI('/ajax/requests/loader/').setData(ia).send();};fa.prototype.$RequestsJewel9=function(ga,ha){'use strict';if(!ha)return;var ia=ha.obj.from,ja=ha.obj.suggester,ka=this.$RequestsJewel19(this.$RequestsJewel1[ia]).type,la=ka===19&&!ja;if(!la&&(ka||this.jewel.isOpen()))return;if(w('fbRequestsJewelLoading')){new k().setURI('/ajax/requests/loader/').send();}else{var ma={};ma.reloadcontent=true;new k().setURI('/ajax/requests/loader/').setData(ma).send();}};fa.prototype.$RequestsJewel11=function(ga,ha){'use strict';if(!ha||this.jewel.isOpen()||w('fbRequestsJewelLoading')!==null)return;var ia=this.$RequestsJewel1[ha.obj.from],ja=ia&&w(ia);if(ja){if(n.hasClass(ja,'jewelItemNew')){this.$RequestsJewel22();j.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!n.hasClass(ja,'jewelItemResponded')){o.remove(ja);delete this.$RequestsJewel1[ha.obj.from];--this.$RequestsJewel2;this.$RequestsJewel20();}}};fa.prototype.$RequestsJewel3=function(){'use strict';this.jewel.markSeen();this.$RequestsJewel24();};fa.prototype.$RequestsJewel4=function(ga,ha){'use strict';var ia=o.scry(this.jewelFlyout,'li');new l('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:ia[0].id}).send();var ja=typeof ga!='undefined'&&typeof ha!='undefined'?{requester:ga,type:ha}:{};this.doNewMarkRead&&new l('/ajax/requests/mark_read/',ja).send();};fa.prototype.$RequestsJewel12=function(ga,ha){'use strict';j.inform('jewel/count-updated',{jewel:'requests',count:0});};fa.prototype.$RequestsJewel24=function(ga,ha){'use strict';o.scry(this.jewel.root,'li.jewelItemNew').forEach(function(ia){n.removeClass(ia,'jewelItemNew');});};fa.prototype.$RequestsJewel6=function(ga,ha){'use strict';this.countNew=ha.count;n.conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);n.conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var ia=this.countNew==1?y._("{num} NEW REQUEST",[y.param('num',this.countNew)]):y._({"*":"{num} NEW REQUESTS"},[y.param('num',this.countNew,[0])]);o.setContent(this.newCountSpan,ia);}};fa.prototype.$RequestsJewel20=function(){'use strict';o.scry(this.jewelFlyout,'li.empty').forEach((function(ga){n.conditionShow(ga,this.$RequestsJewel2<=0);}).bind(this));};fa.prototype.$RequestsJewel7=function(){'use strict';j.inform('requestsJewel/opened');var ga=w('fbRequestsJewelLoading'),ha=this.$RequestsJewel23();if(!ga&&!ha){this.unhandledRequest=true;}else if(ga){var ia=Date.now();if(this.openTimestamp+5000<ia){this.openTimestamp=ia;new k().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var ja=Object.keys(this.$RequestsJewel1);if(ja.length>0)new k().setURI('/friends/requests/log_impressions').setData({ids:ja.join(','),ref:'jewel'}).send();}ha&&s.poke(ha);z.onJewelOpened();};fa.prototype.$RequestsJewel5=function(){'use strict';j.inform('requestsJewel/closed');this.$RequestsJewel24();};fa.prototype.$RequestsJewel25=function(){'use strict';return Math.min(Math.max(t.getViewportDimensions().y-ea,da),ca);};fa.prototype.$RequestsJewel13=function(){'use strict';if(this.$RequestsJewel23())new h(this.$RequestsJewel23()).to('height',this.$RequestsJewel25()+'px').duration(100).go();};fa.prototype.setHeight=function(){'use strict';this.$RequestsJewel23().style.height=this.$RequestsJewel25()+'px';};fa.prototype.maybeLoadJewel=function(){'use strict';if(this.unhandledRequest){this.unhandledRequest=false;this.$RequestsJewel7();}};f.exports=fa;},null);
__d('reportData',['Banzai','SessionName'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={retry:true};function k(l,m){m=m||{};var n={ft:m.ft||{},gt:m.gt||{}},o='-',p=[],q='r',r=[Date.now(),0,o,l,o,o,q,b.URI?b.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,n,0,0,0,0].concat(p),s=[i.getName(),Date.now(),'act'];h.post('eagle_eye_event',Array.prototype.concat(s,r),j);}f.exports=k;},null);
__d('JewelX',['Event','Arbiter','ArbiterMixin','CSS','DOM','HTML','Keys','Promise','TabIsolation','Toggler','Run','csx','emptyFunction','reportData'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=function(w,x){w&&x&&this.init(w,x);};Object.assign(v,{_instancesByName:{}});Object.assign(v.prototype,j,{init:function(w,x){this.name=x.name;this.root=w;this.badge=x.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;this.bootload_module=x.bootload_module;this.bootload_args=x.bootload_args;this.bootloading=null;this.togglerInstance=q.getInstance(w).setSticky(false);r.onAfterLoad((function(){return this._setupBootload();}).bind(this));if(x.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this._onPrePageTransition.bind(this));v._instancesByName[this.name]=this;var y=this.getFlyout(),z=new p(y);q.createInstance(y).setSticky(false);q.listen('show',this.root,(function(aa){this._logFirstClick();this.hasNew()&&this.markSeen();this.reset();i.inform('layer_shown',{type:'Jewel'});z.enable();this.setupEvents();return this._setupBootload().then((function(){this.inform('opened');}).bind(this));}).bind(this));q.listen('hide',this.root,(function(aa,ba){this.hasNew()&&this.markSeen();this.reset();this.inform('closed');i.inform('layer_hidden',{type:'Jewel'});z.disable();this.removeEvents();}).bind(this));i.subscribe('jewel/count-updated',(function(aa,ba){ba.jewel==this.name&&this.update(ba);}).bind(this));i.subscribe('jewel/focus',(function(aa,ba){if(this.isOpen())q.hide(this.root);}).bind(this));},getRoot:function(){return this.root;},getFlyout:function(){if(typeof this._flyout==='undefined')this._flyout=l.find(this.root,".__tw");return this._flyout;},hasNew:function(){return k.hasClass(this.root,'hasNew');},isOpen:function(){return k.hasClass(this.root,'openToggler');},reset:function(){k.removeClass(this.root,'hasNew');},setContent:function(w){var x=l.find(this.root,'ul.jewelItemList');l.setContent(x,m(w));},update:function(w){this.countNew=w.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var x=isNaN(this.countNew)||this.countNew>0;k.conditionClass(this.root,'hasNew',x);this.inform('updated',w);},setupEvents:function(){this.escHandler=h.listen(document.documentElement,'keydown',(function(w){if(w.keyCode===n.ESC&&this.isOpen())q.hide(this.root);}).bind(this));},removeEvents:function(){if(this.escHandler){this.escHandler.remove();this.escHandler=null;}},markSeen:function(){i.inform('jewel/count-updated',{jewel:this.name,count:0},i.BEHAVIOR_STATE);this.inform('marked-seen');},_onPrePageTransition:function(w,x){if(!this._isSnowliftURI(x.from)&&!this._isSnowliftURI(x.to))this.togglerInstance&&this.togglerInstance.hide();},_isSnowliftURI:function(w){return w&&w.getQueryData().hasOwnProperty('theater');},_logFirstClick:function(){this._logFirstClick=t;u('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});},_setupBootload:function(){if(!this.bootload_module)return o.resolve();if(!this.bootloading)this.bootloading=new o((function(w,x){this.bootload_module.load().then((function(y){new y(this,this.bootload_args);w();}).bind(this))['catch'](x);}).bind(this));return this.bootloading;}});f.exports=v;},null);
__d('ModalMask',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=null,j=0,k={show:function(){j++;if(!i){i=h.create('div',{id:'modalMaskOverlay'});h.appendContent(document.body,i);}},hide:function(){if(j){j--;if(!j&&i){h.remove(i);i=null;}}},getNode:function(){return i;}};f.exports=k;},null);
__d('LitestandNewsfeedCountUpdater',['Arbiter','AsyncRequest','LitestandMessages','NavigationMessage','WildWildWestJSGating','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p=0;function q(){o&&clearTimeout(o);if(n)return;var u=l.badge_update_time;o=setTimeout(r,u);}function r(){if(n)return;new i().setURI('/ajax/litestand/newsfeed_count').setHandler(function(u){if(n)return;s(u.getPayload());q();}).setAllowCrossPageTransition(true).send();}function s(u){h.inform(j.UPDATE_HOME_COUNT,{count:u,onHome:n},h.BEHAVIOR_STATE);if(l.show_badge_bk){h.inform(k.NAVIGATION_COUNT_UPDATE,{key:'nf',count:n?0:u-p});p=u;}}var t={init:function(){t.init=m;h.subscribe(j.NEWSFEED_LOAD,function(){n=true;s(0);});h.subscribe(j.LEAVE_HOME,function(){n=false;q();});q();}};f.exports=t;},null);
__d('LitestandChromeHomeCount',['Arbiter','CSS','DOM','Event','LitestandMessages','LitestandNewsfeedCountUpdater','Parent','UserAgent_DEPRECATED','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=20,s,t,u,v,w,x={init:function(y){w=y;t=j.find(document,"div._uaw ._5ahz");s=t.parentNode;u=n.byClass(s,"_1ayn");v=false;h.subscribe(l.UPDATE_HOME_COUNT,function(z,aa){x.updateBadge(aa.onHome?0:aa.count);});k.listen(u,'click',function(event){var z=event.getModifiers();if(z.shift||o.osx()&&z.meta||o.windows()&&z.control)x.updateBadge(0);});m.init();x.updateBadge(w);},updateBadge:function(y){w=y;var z=y>0;x.toggleBadge(z);if(z){var aa=y>r?r+'+':y;j.setContent(t,aa);}},toggleBadge:function(y){if(v===y)return;v=y;i.conditionClass(s,"_5ahy",!y);}};f.exports=x;},null);
__d('runAfterScrollingStops',['Arbiter','Event','Run','debounceAcrossTransitions','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(x,y,z){if(y&&p[y])return;if(!o){h.subscribe('page_transition',w);o=true;}if(!n){x();return;}y&&(p[y]=1);q.push(x);if(!z){if(s){j.onLeave(w);s=false;}r.push(q.length-1);}}var n,o,p={},q=[],r=[],s=true,t=500,u=k(function(){n=false;var x=q;q=[];r=[];p={};for(var y=0,z=x.length;y<z;++y)x[y]();},t);function v(){n=true;u();}function w(){var x=r;r=[];s=true;for(var y=0,z=x.length;y<z;++y)q[x[y]]=l;}i.listen(window,'scroll',v);f.exports=m;},null);
__d('LitestandOffscreenController',['Arbiter','CSS','DOMQuery','Event','NavigationMessage','Run','Scroll','Style','SubscriptionsHandler','Vector','cx','csx','getOrCreateDOMID','queryThenMutateDOM','runAfterScrollingStops','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=1,y=9,z=10,aa={},ba=false,ca,da,ea,fa,ga=[];function ha(){ca&&ca.release();ca=null;ba=false;}function ia(){aa={};ga=[];}function ja(){if(i.hasClass(document.body,"_5vb_"))return z;return y;}function ka(){fa=fa||q.getViewportDimensions().y;da=q.getScrollPosition().y;ea=da+fa;if(x){da-=fa*x;ea+=fa*x;}for(var sa in aa){var ta=aa[sa];ta.position=q.getElementPosition(ta.element).y;if(!ta.hidden)ta.height=ta.element.offsetHeight;}}function la(){var sa=[];for(var ta in aa){var ua=aa[ta],va=ua.position,wa=va+ua.height<da,xa=va>ea;if(!ua.hidden&&(wa||xa)){ma(ua);}else if(!wa&&!xa){ua.pendingHide=false;if(ua.hidden){if(ua.dirty&&va<da){sa.push(ta);i.addClass(na(ua),"_49nu");}else o.apply(ua.element,{height:'',marginBottom:''});i.show(na(ua));ua.dirty=false;ua.hidden=false;}}}if(!sa.length)return;var ya=0;u(function(){for(var za=0,ab=sa.length;za<ab;za++){var bb=aa[sa[za]];ya+=bb.height-na(bb).offsetHeight+o.getFloat(bb.element,'marginBottom');}},function(){for(var za=0,ab=sa.length;za<ab;za++){var bb=aa[sa[za]];i.removeClass(na(bb),"_49nu");o.apply(bb.element,{height:'',marginBottom:''});}ya&&n.setTop(document.body,n.getTop(document.body)-ya);});}function ma(sa){if(!sa.pendingHide){ga.push(sa);sa.pendingHide=true;}}function na(sa){if(sa.wrapperElement)return sa.wrapperElement;var ta=sa.element;if(ta.firstElementChild)return sa.wrapperElement=ta.firstElementChild;for(var ua=0;ua<ta.childNodes.length;ua++)if(ta.childNodes[ua].tagName)return sa.wrapperElement=ta.childNodes[ua];}function oa(){var sa=ja()+'px';for(var ta=0;ta<ga.length;ta++){var ua=ga[ta];if(j.scry(ua.element,"._52fb").length)ua.pendingHide=false;if(ua&&ua.element&&ua.pendingHide&&!ua.hidden){o.apply(ua.element,{height:ua.height+'px',marginBottom:sa});i.hide(na(ua));ua.hidden=true;ua.pendingHide=false;}}ga=[];}function pa(){v(oa,'LitestandOffscreenController/hide');u(ka,la,'LitestandOffscreenController');}function qa(){m.onLeave(ha);ca=new p();ca.addSubscriptions(h.subscribe(l.NAVIGATION_BEGIN,ia),k.listen(window,'scroll',w(pa)),k.listen(window,'resize',w(function(){fa=null;pa();})));ba=true;}var ra={attachSubstream:function(sa){ba||qa();aa[t(sa)]={element:sa};}};f.exports=ra;},null);
__d('LitestandStream',['Arbiter','DOMQuery','LitestandMessages','LitestandStoryInsertionStatus','ViewportBounds','csx','ge','getElementPosition','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s,t={init:function(u,v,w){q=v;r=w;s=u;h.subscribe(j.STORIES_INSERTED,function(x,y){if(!y||!y.substream_id||!q)return;var z=i.scry(n(y.substream_id),t.getStoriesSelector());z.forEach(function(aa){var ba=i.scry(aa,"._5pbw"),ca=i.scry(aa,"._5pcp")[0],da=i.scry(aa,"._5pbx")[0];if(ba[0]&&ca&&da){var ea='';for(var fa=0;fa<ba.length;fa++)ea+=p(ba[fa])+' ';ea.trim();aa.setAttribute('aria-labelledby',ea+' '+p(ca)+' '+p(da));}});});},getStoriesSelector:function(){return "._5jmm";},getStreamRoot:function(){return s;},getSectionID:function(){return r;},canInsertNewerStories:function(){if(l.getTop()>o(t.getStreamRoot()).y)return false;return k.canInsert();},getFeedStreamID:function(){return parseInt(s.id.split('feed_stream_')[1],16)%1e+08;}};f.exports=t;},null);
__d('LitestandNewStoryController',['Animation','Arbiter','AsyncRequest','CSS','csx','DOMQuery','Event','LitestandMessages','LitestandStream','NavigationMessage','Run','Style','SubscriptionsHandler','UITinyViewportAction','ge','getScrollPosition','memoize','$','queryThenMutateDOM','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba=1,ca,da,ea=500,fa=600,ga,ha;function ia(){ha&&clearTimeout(ha);ha=null;}function ja(){ha=setTimeout(function(){ha=null;ka();},ea);}function ka(){var eb;z(function(){eb=p.canInsertNewerStories();},function(){if(eb){bb();}else ja();},'LitestandNewStoryController/tryShowingStories');}var la=0,ma,na=true,oa;function pa(){if(!oa){oa=new t();oa.addSubscriptions(i.subscribe(q.NAVIGATION_BEGIN,ya),n.listen(window,'resize',qa),n.listen(window,'scroll',wa));r.onLeave(ya);}}function qa(){if(!sa())ya();}var ra=x(function(){var eb=v('blueBarNAXAnchor');return eb&&k.hasClass(eb,'fixed_elem');});function sa(){return ra()&&!u.isTiny();}function ta(){return m.scry(document,"div._vox").length;}function ua(eb,fb){var gb=v(eb);if(gb)gb.style.marginTop=fb?fb+'px':'';}function va(eb){if(!sa()){eb=0;}else eb=Math.max(eb,0);la=eb;ua('rightCol',eb);if(!ta())ua('leftCol',eb);}function wa(){var eb=w(window).y;if(eb<=0){ya();return;}if(eb<la){na=false;va(eb);}if(da&&eb>da+50&&ca){ca.hide();da=null;}da=eb;}function xa(){if(!na){ma&&ma.stop();ma=null;}}function ya(){if(oa){oa&&oa.release();na=false;va(0);oa=null;if(ca){ca.hide();da=null;}}}function za(eb,fb){ma=new h(eb).from('opacity',0).to('opacity',1).duration(fa);if(fb){na=true;for(var gb=0;gb<ba;gb++)ma.checkpoint(1,xa).from('opacity',1).to('opacity',0).duration(fa).checkpoint().from('opacity',0).to('opacity',1).duration(fa);}ma.go();}function ab(eb){ia();if(!ga)return;if(eb)var fb=w(window),gb=ga.nextSibling,hb=gb.offsetTop,ib=function(){va(fb.y+gb.offsetTop-hb);window.scrollTo(fb.x,la);};s.apply(ga,{height:'',left:'',overflow:'',position:'',width:''});if(eb){ib();var jb=ga;aa(function(){pa();ib();za(jb,true);if(ca){ca.setAtTop();ca.show();}});}else za(ga,false);i.inform(o.STORIES_INSERTED);i.inform(o.NEWER_STORIES_INSERTED);setTimeout(function(){i.inform('reflow');},0);new j().setURI('/ajax/litestand/update_filter_viewtime').setData({section_id:p.getSectionID()}).send();ga=null;i.inform(o.NEW_STORIES_DISPLAYED);}function bb(){ab(sa());}function cb(){ab(false);}var db={waitForDisplay:function(eb){if(!ga)ga=y(eb);if(p.canInsertNewerStories()){bb();}else ja();},showStoriesNow:function(eb){ga=eb;cb();},setNewStoryPill:function(eb){ca=eb;}};f.exports=db;},null);
__d('ViewportAtFeedTop',['getElementPosition','LitestandStream','ViewportBounds'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={isTrue:function(){if(j.getTop()>h(i.getStreamRoot()).y)return false;return true;}};f.exports=k;},null);
__d('LitestandStreamLoader',['Arbiter','Bootloader','CSS','DOM','EntstreamStoryDeduper','Event','JSXDOM','LitestandStreamConfig','LitestandStoryInsertionStatus','LitestandMessages','LitestandOffscreenController','LitestandStream','NavigationMessage','OnVisible','Run','throttle','UserActivity','$','ge','getElementPosition','getViewportDimensions','getUnboundedScrollPosition','ForceFetchAfterLongInactiveQE','NewStoriesPillConfig','ViewportAtFeedTop','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){if(c.__markCompiled)c.__markCompiled();var ha=Object.assign||function(ub){for(var vb=1;vb<arguments.length;vb++){var wb=arguments[vb];for(var xb in wb)if(Object.prototype.hasOwnProperty.call(wb,xb))ub[xb]=wb[xb];}return ub;},ia=0,ja=false,ka={},la,ma,na,oa,pa,qa,ra,sa=0,ta,ua,va=[],wa=60000,xa=30,ya=200,za=0,ab,bb;function cb(){v.onLeave(db);ia=0;va=[h.subscribe(t.NAVIGATION_BEGIN,db),h.subscribe(q.NEWER_STORIES_INSERTED,function(){bb=null;}),h.subscribe('useractivity/focus',function(){var ub=Date.now()-x.getLastLeaveTime(),vb=xa*wa,wb=ya*wa;if(da.forceRefresh&&p.canInsert())if(ub>wb){window.location.href=window.location.href;}else if(ub>vb){var xb=new ga('/home.php');xb.go();}})];if(ea.no_insert_when_dialog){va.push(h.subscribe('layer_shown',function(ub,vb){if(vb&&vb.type==='DialogX')ia++;}),h.subscribe('layer_hidden',function(ub,vb){if(vb&&vb.type==='DialogX')ia--;}));p.registerBlocker(function(){return ia>0;});}ja=true;}function db(){h.inform(q.LEAVE_HOME);ka={};ua=null;sa=0;va.forEach(h.unsubscribe);va=[];la&&la.remove();pa&&clearTimeout(pa);pa=null;qa&&clearTimeout(qa);qa=null;oa=null;bb=null;ta&&ta.remove();ta=null;ja=false;za=0;}function eb(ub){qa&&clearTimeout(qa);qa=setTimeout(function(){qa=null;lb(false);},ub);}function fb(ub){pa&&clearTimeout(pa);pa=setTimeout(function(){pa=null;lb(true);},ub);}function gb(){if(ua&&oa&&ua.pollIntervalMS&&ua.pollIntervalMS>1000){x.setIdleTime(ua.newStoryIdleTime);fb(ua.pollIntervalMS);if(ea.show_new_stories_pill)eb(ea.middle_feed_polling_time);}}function hb(){la=new u(k.find(ma,'a'),sb.bind(null),false,ua.bufferPixels);}function ib(){var ub=ca(window).y;return ub>ua.firstPagerScrollBuffer;}function jb(){if(ib()){hb();ta&&ta.remove();ta=null;}}function kb(ub){var vb=k.find(ma,'a');m.listen(vb,'click',function(event){sb();ta&&ta.remove();ta=null;event.preventDefault();});var wb=aa(ma),xb=ba();if(ub&&wb.y<xb.height){sb();}else if(ub&&!ib()){ta=m.listen(window,'scroll',w(jb));}else hb();}function lb(ub){if(!oa)return;if(!x.isActive(ua.newStoryIdleTime)){x.subscribeOnce(lb.bind(null,ub));return;}if(x.hasBeenInactive()){x.resetActiveStatus();var vb=ua.pollIntervalMS,wb=Date.now()-x.getLastInActiveEnds();if(wb<vb){if(ub){fb(vb-wb);}else eb(vb-wb);return;}}if(ub){if(!s.canInsertNewerStories()){fb(ua.pollIntervalMS);return;}}else if(fa.isTrue()||!p.canInsert()){eb(ea.middle_feed_polling_time);return;}mb(false);}function mb(ub){if(!oa)return;pa&&clearTimeout(pa);qa&&clearTimeout(qa);if(!bb){var vb=s.getStreamRoot();bb=n.div({style:{height:0,width:vb.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});k.prependContent(vb,bb);h.inform(q.NEW_STORIES_CONTAINER_CREATED,bb);}var wb=n.div(null);k.prependContent(bb,wb);i.loadModules(["UIPagelet"],function(xb){xb.loadFromEndpoint('LitestandNewerStoriesPagelet',wb,Object.assign(oa,{cursor:ab,containerID:k.getID(bb),fblogo:ub}),{crossPage:true});});h.inform(q.PILL_PAGELET_REQUEST_SENT);}function nb(){var ub=k.getID(ma);j.addClass(ma,'async_saving');var vb=qb(),wb=vb.cursor,xb=vb.storiesCount;if(ka[wb])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+wb);ka[wb]=wb;var yb={cursor:wb,pager_config:na,pager_id:ub,scroll_count:++sa,feed_stream_id:s.getFeedStreamID(),client_stories_count:xb};i.loadModules(["UIPagelet"],function(zb){zb.loadFromEndpoint(ua.pagerController,k.getID(ra),yb,{append:true,automatic:true,usePipe:true,crossPage:ua.crossPage,errorHandler:ob,transportErrorHandler:ob});});}function ob(ub){var vb=qb();delete ka[vb.cursor];j.removeClass(ma,'async_saving');}function pb(){var ub=rb();if(ub.length){return ub[0].getAttribute('data-cursor');}else return ma&&ma.getAttribute('data-cursor');}function qb(){var ub=rb(),vb={};if(ub.length){vb.cursor=ub[ub.length-1].getAttribute('data-cursor');vb.storiesCount=ub.length;}else{vb.cursor=ma&&ma.getAttribute('data-cursor');vb.storiesCount=0;}return vb;}function rb(){var ub=k.scry(ra,s.getStoriesSelector());return ub.filter(function(vb){return vb.getAttribute('data-cursor');});}function sb(){nb();la&&la.remove();la=null;}var tb={register:function(ub,vb,wb,xb){ja||cb();ua=ha({bufferPixels:1000,firstPagerScrollBuffer:100,pagerController:'LitestandMoreStoriesPagelet',pollIntervalMS:null,newStoryIdleTime:60000},vb);na=wb;ra=y(ub);ab=pb();ma=xb;kb(true);gb();},removeOldPager:function(ub,vb){if(ub)k.remove(y(ub));j.show(y(vb));},removeLoadingIndicator:function(ub,vb){var wb=z(ub);if(wb)k.remove(wb);j.show(vb);},moreStoriesInserted:function(ub){h.inform(q.STORIES_INSERTED,{substream_id:ub});var vb=y(ub);if(o.hide_offscreen_substreams)r.attachSubstream(vb);},attachNewPager:function(ub){l.dedupeHide(s.getStreamRoot(),s.getStoriesSelector());ma=ub;ma&&kb(false);},setPollerData:function(ub){if(ub){oa=ub;gb();}},headLoadCompleted:function(ub){ab=ub.newCursor;gb();var vb=ub.stories;if(vb&&vb.length>0){for(var wb=vb.length-1;wb>=0;wb--)vb[wb].setAttribute('data-insertion-position',--za);var xb=s.getStoriesSelector();l.dedupe(s.getStreamRoot(),xb);var yb=k.scry(bb,xb);h.inform('Stream/totalHeadLoadedStories',{count:-za,hiddenCount:yb.length,fblogo:ub.fblogo});}},forceNewFetch:function(){mb(true);}};f.exports=tb;},null);
__d('MercuryJewelModuleLoader',['JSResource'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h('MercuryJewel');},null);
__d("RenderManager",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){"use strict";this._isDirty=false;this._obj=i;}h.prototype.dirty=function(){"use strict";if(!this._isDirty){this._isDirty=true;setTimeout(this._doPaint.bind(this),0);}};h.prototype._doPaint=function(){"use strict";this._isDirty=false;this._obj.paint();};f.exports=h;},null);
__d('CounterDisplay',['Arbiter','CSS','DOM','RenderManager','Run','$','removeFromArray'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();function o(p,q,r,s,t,u){Object.assign(this,{_name:p,_valueNode:m(q),_wrapperNode:m(r)||null,_statusClass:t,_rm:new k(this),_arbiterSubscription:null,_count:0});var v=this._valueNode.firstChild;if(v){var w=parseInt(v.nodeValue,10);if(!isNaN(w))this._count=w;}this._statusNode=s?m(s):null;this._subscribeAll();o.instances.push(this);if(!u)l.onLeave(this._destroy.bind(this),true);}Object.assign(o,{EVENT_TYPE_ADJUST:'CounterDisplay/adjust',EVENT_TYPE_UPDATE:'CounterDisplay/update',instances:[],adjustCount:function(p,q){h.inform(o.EVENT_TYPE_ADJUST+'/'+p,q);},setCount:function(p,q){h.inform(o.EVENT_TYPE_UPDATE+'/'+p,q);}});Object.assign(o.prototype,{_destroy:function(){delete this._valueNode;delete this._wrapperNode;if(this._arbiterSubscription){this._arbiterSubscription.unsubscribe();delete this._arbiterSubscription;}n(o.instances,this);},adjustCount:function(p){this._count=Math.max(0,this._count+p);this._rm.dirty();return this;},setCount:function(p){this._count=Math.max(0,p);this._rm.dirty();return this;},paint:function(){j.setContent(this._valueNode,this._count);this._toggleNodes();},_toggleNodes:function(){if(this._wrapperNode)i.conditionClass(this._wrapperNode,'hidden_elem',this._count<=0);if(this._statusClass&&this._statusNode)i.conditionClass(this._statusNode,this._statusClass,this._count>0);},_subscribeAll:function(){var p=[o.EVENT_TYPE_ADJUST+'/'+this._name,o.EVENT_TYPE_UPDATE+'/'+this._name];this._arbiterSubscription=h.subscribe(p,this._onInform.bind(this),h.SUBSCRIBE_NEW);},_onInform:function(p,q){q=parseInt(q);if(isNaN(q))return;if(p.indexOf(o.EVENT_TYPE_ADJUST)!=-1){this.adjustCount(q);}else if(p.indexOf(o.EVENT_TYPE_UPDATE)!=-1){this.setCount(q);}else return;return;}});f.exports=o;},null);
__d('MessagingEvents',['Arbiter','ChannelConstants','arrayContains','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=Object.assign||function(p){for(var q=1;q<arguments.length;q++){var r=arguments[q];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))p[s]=r[s];}return p;},m={},n=new h();function o(p){if(!k(m))return;for(var q in p)n.inform('count/'+q,p[q]);}n.subscribe('mark-as-read',function(p,q){(q.tids||q.chat_ids||[]).forEach(function(r){r=''+r;if(!(r in m)){m[r]=true;var s=function(){n.unsubscribe(t);clearTimeout(u);delete m[r];},t=n.subscribe('read',function(v,w){if(j(w.tids||[],r)||j(w.chat_ids||[],r))s();}),u=setTimeout(s,60000);}});});h.subscribe(i.getArbiterType('messaging'),function(p,q){var r=l({},q.obj),event=r.event||'';delete r.type;delete r.event;n.inform(event,r);if('unread_counts' in r){var s=r.unread_counts;o({unread:s.inbox,other_unseen:s.other});}});h.subscribe(i.getArbiterType('inbox'),function(p,q){var r=l({},q.obj);delete r.type;o(r);});b.MessagingEvents=f.exports=n;},3);
__d('TitanLeftNav',['CounterDisplay','MessagingEvents'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={initialize:function(){i.subscribe('count/other_unseen',function(k,l){h.setCount('other_unseen',l);});}};f.exports=j;},null);
__d('AccessibilityShortcut',['AccessibilityLogger','Event','Focus','ge','onEnclosingPageletDestroy','warning'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={init:function(o,p){var q=i.listen(o,'click',function(r){r.preventDefault();var s=k(p);if(s){j.set(s);h.logSRKey();}else m(s,'Failed to set focus on element with ID: %s',p);});l(o,function(){return q.remove();});}};f.exports=n;},null);
__d('ViewportTrackingHelper',['Event','DOMDimensions','Vector'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getScrollListener:function(l){return h.listen(window,'scroll',l);},looseIsVisible:function(l,m){if(!l.x&&!l.y&&!l.width&&!l.height)return false;var n=j.getScrollPosition().y,o=i.getViewportDimensions().height,p=o+m-n;return l.y<p;},isVisible:function(l,m){if(!l.x&&!l.y&&!l.width&&!l.height)return false;var n=i.getViewportDimensions().height,o=Math.max(l.y,0),p=Math.min(l.y+l.height,n),q=Math.min(l.height,m);return p-o>=q;},isDescendantOf:function(l,m){if(l===m)return l;while(l&&l.parentNode){if(l.parentNode===m)return l;l=l.parentNode;}return false;}};f.exports=k;},null);
__d('ViewportTracking',['Arbiter','AsyncSignal','Banzai','BanzaiScuba','CSS','cx','CurrentUser','DOM','DOMDimensions','Event','LitestandMessages','NavigationMessage','Run','SubscriptionsHandler','UserActivity','Vector','ViewportTrackingHelper','clickRefAction','collectDataAttributes','debounce','getElementPosition','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){if(c.__markCompiled)c.__markCompiled();var da=97,ea=51,fa='vpv',ga='/feed/feed_tracking/vpv_waterfall_logging',ha=3,ia=2,ja=1,ka=0,la=1,ma=2,na=3,oa=4;function pa(){'use strict';}pa.prototype.init=function(qa){'use strict';this.useBanzai=true;this.viewportHeightRatio=qa.viewport_height_ratio?qa.viewport_height_ratio:.25;this.vpvDebug=!!qa.vpv_debug;this.vpvdDebug=!!qa.vpvd_debug;this.vpvdAnalysis=!!qa.vpvd_analysis;this.useWaterfallLogging=!!qa.waterfall_logging;this.loggedStoryIDs={};this.readStoryIDs={};this.annotatedStoryIDs={};this.minSizeToBeVisible=200;this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=90000;this.active_state_duration=1000;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.invalidateAllStoriesCache();this.cachedViewportHeight=p.getViewportDimensions().height;this.isTimetrackingEnabled=0;this.activeStories={};this.userInactiveLock=false;this.userActivityPollerTimeoutID=-1;this._headLoadStoryCount=0;this.getDataFromConfig(qa);if(this.isTimetrackingEnabled){this.lastMouseX=-1;this.lastMouseY=-1;this.lastStreamY=-1;this.latestStreamYChangedTimeStamp=-1;this.userFocus=ma;this.latestUserFocus=ma;this.latestUserActivity='init';this.focusedStory=null;this.latestFocusedStory=null;this.latestActiveStory=null;this.totalVPVDuration={};}this.isLoose=!!qa.is_loose;this.maxScrollPosition=0;if(qa.tracking_duration_config){this.scrollThrottlingInterval=qa.tracking_duration_config.scroll_throttling_interval;this.mouseThrottlingInterval=qa.tracking_duration_config.mouse_throttling_interval;this.keyboardThrottlingInterval=qa.tracking_duration_config.keyboard_throttling_interval;this.userActivityPollingInterval=qa.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=qa.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=qa.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=qa.tracking_duration_config.min_time_to_report_immediately;this.active_state_duration=qa.tracking_duration_config.active_state_duration;this.height_diff_to_change_state=qa.tracking_duration_config.story_height_diff_to_change_state;this.focused_state_duration=qa.tracking_duration_config.focused_state_duration;this.discardVPVDIntervalThreshold=qa.tracking_duration_config.discard_vpvd_interval_threshold;}var ra,sa=aa(this.fireTimer,this.getTimeout(),this);if(this.isLoose){this.minSizeToBeVisible=0;ra=ca((function(){this.maxScrollPosition=Math.max(this.maxScrollPosition,w.getScrollPosition().y);sa();}).bind(this));}else ra=sa;this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;if(this.annotatedVPVLogging)this.initialStories.forEach(this.logAnnotatedVPV,this);if(this.useWaterfallLogging)this.getStoriesInView().forEach(function(wa){this.waterfallLogStep(wa,'100_all_stories_in_view_ignore_height',true);},this);this.vpvHeartBeatInterval=qa.vpv_heartbeat_interval;this.passVPVHeartbeatGK=qa.use_vpv_heartbeat;if(this.passVPVHeartbeatGK){this.intervalCount=1;this.fireTimerCount=1;this.storiesInView=this.initialStories?this.initialStories:this.getStoriesInView();this.vpvHeartBeatIntervalSignal=setInterval((function(){this._sendSignal('interval');}).bind(this),this.vpvHeartBeatInterval);}this.subscriptions=new u();this.subscriptions.addSubscriptions(this._getScrollListener(ra),q.listen(window,'resize',(function(){this.invalidateVisibleStoriesCache();this.cachedViewportHeight=p.getViewportDimensions().height;ra();}).bind(this)),q.listen(window,'focus',(function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'window_focus');}).bind(this)),q.listen(window,'blur',(function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(true,'window_blur');}).bind(this)),h.subscribe(s.NAVIGATION_BEGIN,this.cleanup.bind(this)),h.subscribe('Stream/totalHeadLoadedStories',(function(wa,xa){this._headLoadStoryCount=xa.count;}).bind(this)),h.subscribe(r.STORIES_INSERTED,(function(){if(!this.initialStoriesLogged){var wa=this.getStoriesInView();wa.forEach(this.logAnnotatedVPV,this);}else ra();if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'stories_inserted');}).bind(this)));if(this.isTimetrackingEnabled){this.updateTimeTrackingData(false,'init');var ta=ca((function(event){this.invalidateVisibleStoriesCache();this.handleScroll(event);}).bind(this),this.scrollThrottlingInterval),ua=ca((function(event){this.handleKeyboard(event);}).bind(this),this.keyboardThrottlingInterval),va=ca((function(event){this.handleMouse(event);}).bind(this),this.mouseThrottlingInterval);this.subscriptions.addSubscriptions(q.listen(window,'scroll',ta),q.listen(document.documentElement,'DOMMouseScroll',ta),q.listen(document.documentElement,'mousewheel',ta));this.subscriptions.addSubscriptions(q.listen(document.documentElement,'keydown',ua));this.subscriptions.addSubscriptions(q.listen(document.documentElement,'mouseover',va),q.listen(document.documentElement,'mousemove',va));this.subscriptions.addSubscriptions(h.subscribe('Event/stop',(function(wa,xa){this.handleMouse(xa.event);}).bind(this)));this.subscriptions.addSubscriptions(q.listen(document.documentElement,'click',(function(event){this.handleMouse(event);}).bind(this)),h.subscribe('PhotoSnowlift.OPEN',(function(){this.userFocus=na;this.handleLayers();}).bind(this)),h.subscribe('PhotoSnowlift.CLOSE',(function(){this.userFocus=la;this.focusedStory=null;this.updateTimeTrackingData(false,'snowlift_close');}).bind(this)));this._userActivityPoller();}t.onLeave(this.cleanup.bind(this));t.onUnload(this.cleanup.bind(this));};pa.prototype._getScrollListener=function(qa){'use strict';return q.listen(window,'scroll',qa);};pa.prototype.cleanup=function(){'use strict';if(this.subscriptions){this.subscriptions.release();this.subscriptions=null;}if(this.isTimetrackingEnabled){clearTimeout(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true,'cleanup');}if(this.passVPVHeartbeatGK)clearInterval(this.vpvHeartBeatIntervalSignal);if(this.annotatedVPVLogging){var qa=this.getStoriesInView();qa.forEach(this.logAnnotatedVPV,this);}this.initialStories=[];this._headLoadStoryCount=0;};pa.prototype.fireTimer=function(){'use strict';if(this.useWaterfallLogging){var qa=this.getStoriesInViewIgnoreHeight();qa.forEach(function(ra){this.waterfallLogStep(ra,'100_all_stories_in_view_ignore_height');},this);}if(!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true;}this.storiesInView=this.getStoriesInView();this.storiesInView.forEach(this.markStoryRead,this);if(this.passVPVHeartbeatGK)this._sendSignal('fireTimer');};pa.prototype.heartBeatIsEnabled=function(){'use strict';return false;};pa.prototype.getSessionID=function(){'use strict';return null;};pa.prototype._sendSignal=function(qa){'use strict';if(!this.heartBeatIsEnabled())return;var ra=-1;if(qa=='interval'){ra=this.intervalCount++;}else if(qa=='fireTimer')ra=this.fireTimerCount++;var sa=-1,ta=-1,ua=-1;if(this.storiesInView.length>0){sa=this.getStoryID(this.storiesInView[0]);ta=this.getQueryID(this.storiesInView[0]);ua=this.getFBFeedLocations(this.storiesInView[0]);}var va=new k('vpv_heartbeat_js');va.addInteger('qid',ta);va.addInteger('uid',n.getID());va.addInteger('firststoryid',sa);va.addInteger('time',Math.round(Date.now()/1000));va.addNormal('type',qa);va.addInteger('count',ra);va.addInteger('fbfeed_location',ua);va.post();};pa.prototype._userActivityPoller=function(){'use strict';if(!this.userInactiveLock&&!v.isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.userFocus=ma;this.updateTimeTrackingData(false,'user_activity_inactive');v.subscribeOnce((function(){this.userFocus=la;this.updateTimeTrackingData(false,'user_activity_active');this.userInactiveLock=false;}).bind(this));}this.userActivityPollerTimeoutID=setTimeout(this._userActivityPoller.bind(this),this.userActivityPollingInterval);};pa.prototype.getQueryID=function(qa){'use strict';return -1;};pa.prototype.getFBFeedLocations=function(qa){'use strict';return -1;};pa.prototype.getFBFeedInsertionPosition=function(qa){'use strict';return -1;};pa.prototype.createVPVDTimer=function(qa){'use strict';var ra=document.createElement("Label");ra.setAttribute("for",qa);ra.setAttribute("class",'vpvd_debug_timer');return ra;};pa.prototype.updateVPVDTimer=function(qa){'use strict';var ra=this.activeStories[qa].story,sa=o.scry(ra,'.vpvd_debug_timer');if(!sa.length){sa=[this.createVPVDTimer(ra),this.createVPVDTimer(ra)];var ta=o.scry(ra,'.UFIRow');if(ta.length&&ta[ta.length-1].clientWidth>0){ta[ta.length-1].appendChild(sa[0]);}else ra.appendChild(sa[0]);ra.insertBefore(sa[1],ra.firstChild);}var ua=this.totalVPVDuration[qa],va=Math.floor(ua/1000)+'.'+Math.floor(ua%1000/100);o.setContent(sa[0],va);o.setContent(sa[1],va);};pa.prototype.updateVPVDTimers=function(){'use strict';for(var qa in this.activeStories)if(this.activeStories.hasOwnProperty(qa))this.updateVPVDTimer(qa);};pa.prototype.logVpvdAnalysis=function(qa,ra,sa,ta,ua,va){'use strict';var wa=new k('vpv_duration');wa.addDenorm('qid',this.getQueryID(this.activeStories[qa].story));wa.addDenorm('uid',n.getID());wa.addDenorm('vsid',qa);wa.addInteger('time',Math.round(Date.now()/1000));wa.addInteger('duration',ta);wa.addInteger('total_duration',ua);wa.addNormal('story_state',this.activeStories[qa].state);wa.addNormal('is_active_state',sa);wa.addNormal('num_visible_stories',this.numVisibleStories);wa.addInteger('story_height',this.activeStories[qa].story_height);wa.addInteger('story_visible_height',this.activeStories[qa].height);wa.addInteger('state_visible_height',va);wa.addInteger('total_visible_height',this.totalVisibleHeight);wa.addInteger('total_height',this.totalHeight);wa.addNormal('user_focus',this.latestUserFocus);wa.addNormal('next_user_focus',this.userFocus);wa.addInteger('vpvd',ra);wa.addInteger('accumulated_vpvd',this.activeStories[qa].vpvd);wa.addNormal('user_activity',this.latestUserActivity);wa.addNormal('next_user_activity',this.userActivity);wa.addInteger('story_position_y',this.activeStories[qa].y);wa.addInteger('feed_insertion_position',this.getFBFeedInsertionPosition(this.activeStories[qa].story));wa.addNormal('visible_position',this.activeStories[qa].visible_position);wa.addNormal('is_focused_story',this.activeStories[qa].is_focused);wa.post();};pa.prototype.shouldDiscardStory=function(qa){'use strict';return this.activeStories[qa].height!=this.activeStories[qa].story_height&&this.activeStories[qa].height<this.totalHeight/2;};pa.prototype.calculateTotalHeight=function(){'use strict';this.totalHeight=0;for(var qa in this.activeStories)if(this.activeStories.hasOwnProperty(qa))this.totalHeight+=this.activeStories[qa].height;};pa.prototype.updateVPVDurations=function(qa){'use strict';if(this.latestUserFocus===ma||qa-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;var ra={1:0,2:0,3:0},sa=qa-this.latestTimeTrackingTimestamp>=this.focused_state_duration;this.totalVisibleHeight=0;for(var ta in this.activeStories)if(this.activeStories.hasOwnProperty(ta))if(!(this.latestUserFocus===la&&sa&&this.shouldDiscardStory(ta))){ra[this.activeStories[ta].state]+=this.activeStories[ta].height;this.totalVisibleHeight+=this.activeStories[ta].height;}var ua=0,va=qa-this.latestTimeTrackingTimestamp;if(this.latestUserFocus===la){va=ra[ha]>0?this.focused_state_duration:this.active_state_duration;va=Math.min(va,qa-this.latestTimeTrackingTimestamp);ua=qa-this.latestTimeTrackingTimestamp-va;}var wa=0,xa=ha;for(var ya=ha;ya>=ja;ya--)if(ra[ya]>0){wa=ra[ya];xa=ya;break;}var za=ra[ha]+ra[ia]+ra[ja],ab=0;for(ta in this.activeStories)if(this.activeStories.hasOwnProperty(ta)){if(this.latestUserFocus===la&&sa&&this.shouldDiscardStory(ta))continue;if(wa>0&&this.activeStories[ta].state>=xa){ab=va*(this.activeStories[ta].height/wa);if(this.vpvdAnalysis&&va>0)this.logVpvdAnalysis(ta,ab,true,va,va+ua,wa);this.activeStories[ta].vpvd+=ab;this.totalVPVDuration[ta]+=ab;}if(za>0){ab=ua*(this.activeStories[ta].height/za);if(this.vpvdAnalysis&&ua>0)this.logVpvdAnalysis(ta,ab,false,ua,va+ua,za);this.activeStories[ta].vpvd+=ab;this.totalVPVDuration[ta]+=ab;}}};pa.prototype.updateActiveStory=function(qa,ra,sa,ta){'use strict';this.activeStories[qa].state=ra;this.activeStories[qa].ts=sa;this.activeStories[qa].height_snapshot=ta[qa].height;this.activeStories[qa].is_focused=this.focusedStory===ta[qa].story;this.activeStories[qa].story_height=ta[qa].story_height;if(this.vpvdAnalysis){this.activeStories[qa].visible_position=ta[qa].visible_position;this.activeStories[qa].y=ta[qa].y;}};pa.prototype.updateActiveStories=function(qa,ra){'use strict';for(var sa in qa)if(qa.hasOwnProperty(sa))if(sa in this.activeStories){this.activeStories[sa].height=qa[sa].height;var ta=qa[sa].height-this.activeStories[sa].height_snapshot;if(this.focusedStory===qa[sa].story){this.updateActiveStory(sa,ha,ra,qa);}else if(ta<=-this.height_diff_to_change_state){this.updateActiveStory(sa,this.shouldDiscardStory(sa)?ka:ja,ra,qa);}else if(ta>=this.height_diff_to_change_state||this.activeStories[sa].is_focused||this.activeStories[sa].height===this.activeStories[sa].story_height)this.updateActiveStory(sa,ia,ra,qa);}else{this.activeStories[sa]={evp_ts:ra,story:qa[sa].story,height:qa[sa].height,vpvd:0};if(!this.totalVPVDuration[sa])this.totalVPVDuration[sa]=0;this.updateActiveStory(sa,ia,ra,qa);}};pa.prototype.recordVPVDurations=function(qa,ra){'use strict';for(var sa in this.activeStories)if(this.activeStories.hasOwnProperty(sa))if(ra||!(sa in qa)){if(this.activeStories[sa].vpvd>this.focused_state_duration||this.activeStories[sa].vpvd===this.totalVPVDuration[sa])this.recordTimeStoryWasInView(this.activeStories[sa]);delete this.activeStories[sa];}};pa.prototype.updateTimeTrackingData=function(qa,ra){'use strict';this.userActivity=ra;if(!this.activeStories)this.activeStories={};var sa=Date.now();if(!this.latestTimeTrackingTimestamp)this.latestTimeTrackingTimestamp=sa;var ta=this.getVisibleStoriesFromCache();this.calculateTotalHeight();this.updateVPVDurations(sa);this.updateActiveStories(ta,sa);if(this.vpvdDebug)this.updateVPVDTimers();this.recordVPVDurations(ta,qa);if(qa){this.latestTimeTrackingTimestamp=0;}else this.latestTimeTrackingTimestamp=sa;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;if(this.focusedStory)this.latestActiveStory=this.focusedStory;this.latestFocusedStory=this.focusedStory;this.focusedStory=null;};pa.prototype.needsToUpdateTimeTrackingData=function(){'use strict';return !(this.latestUserFocus===this.userFocus&&(this.userFocus===ma||this.userFocus===la&&!this.latestFocusedStory&&!this.focusedStory));};pa.prototype.getfocusedStory=function(qa){'use strict';var ra=this.getVisibleStoriesFromCache();for(var sa in ra)if(ra.hasOwnProperty(sa))if(x.isDescendantOf(qa,ra[sa].story))return ra[sa].story;return null;};pa.prototype.handleLayers=function(){'use strict';if(this.userFocus===na||this.userFocus===oa){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(false,'media_layer');return true;}return false;};pa.prototype.didInteractWithStream=function(qa){'use strict';return x.isDescendantOf(qa,this.getStream())||x.isDescendantOf(this.getStream(),qa);};pa.prototype.handleScroll=function(event){'use strict';if(this.handleLayers())return;var qa=Date.now(),ra=ba(this.getStream()).y;if(ra!=this.lastStreamY||qa-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(event.target)){this.latestStreamYChangedTimeStamp=qa;this.userFocus=la;}else this.userFocus=ma;this.lastStreamY=ra;if(this.userFocus===la||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'scroll');};pa.prototype.handleKeyboard=function(event){'use strict';if(this.handleLayers())return;if(this.didInteractWithStream(event.target)){this.userFocus=la;this.focusedStory=this.getfocusedStory(event.target);}else if(l.hasClass(event.target,'shareInput')){this.userFocus=la;this.focusedStory=this.latestActiveStory;}else this.userFocus=ma;if(this.userFocus===la||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'keyboard');};pa.prototype.handleMouse=function(event){'use strict';if(this.handleLayers())return;if(event.type!='click'&&event.clientX===this.lastMouseX&&event.clientY===this.lastMouseY)return;if(event.type==='click')this.invalidateVisibleStoriesCache();if(this.didInteractWithStream(event.target)){this.userFocus=la;this.focusedStory=this.getfocusedStory(event.target);}else this.userFocus=ma;this.lastMouseX=event.clientX;this.lastMouseY=event.clientY;if(this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,event.type);};pa.prototype.getStoriesInView=function(){'use strict';var qa=this.getAllStories(),ra=[],sa=false;for(var ta=0;ta<qa.length;ta++){var ua=qa[ta],va=this.getStoryID(ua);if(this.hasBeenVisible(va))continue;if(this.isVisible(ua)){if(ua.getAttribute('data-insertion-position')===null)ua.setAttribute('data-insertion-position',ta-this._headLoadStoryCount);ra.push(ua);sa=true;}else if(sa)break;}return ra;};pa.prototype.getStoriesInViewIgnoreHeight=function(){'use strict';var qa=this.getAllStories(),ra=false,sa=[];for(var ta=0;ta<qa.length;ta++){var ua=qa[ta];if(this.isVisible(ua,false,0)){sa.push(ua);ra=true;}else if(ra)break;}return sa;};pa.prototype.getAllStoriesFromCache=function(){'use strict';if(this.cachedAllStories===null)this.cachedAllStories=this.getAllStories();return this.cachedAllStories;};pa.prototype.invalidateAllStoriesCache=function(){'use strict';this.cachedAllStories=null;this.invalidateVisibleStoriesCache();};pa.prototype.getVisibleStoriesFromCache=function(){'use strict';if(this.cachedVisibleStories===null)this.cachedVisibleStories=this.getAllStoriesInView();return this.cachedVisibleStories;};pa.prototype.invalidateVisibleStoriesCache=function(){'use strict';this.cachedVisibleStories=null;};pa.prototype.getAllStoriesInView=function(){'use strict';var qa=this.getAllStoriesFromCache(),ra={},sa=false,ta=0,ua=qa.length,va=1,wa=qa.length;if(this._indexOfLastVisibleStoryOnPreviousPass>ua/2){ta=ua-1;ua=-1;va=-va;}for(var xa=ta;xa!=ua;xa+=va){var ya=qa[xa],za=this.getHeightIfVisible(ya,false,Math.min(this.minSizeToBeVisible,this.minFractionToBeVisibleForTimetracking*p.getElementDimensions(ya).height));if(za>0||ya===this.focusedStory){if(ya.getAttribute('data-insertion-position')===null)ya.setAttribute('data-insertion-position',xa-this._headLoadStoryCount);var ab=this.getStoryID(ya);ra[ab]={story:ya,height:za,story_height:p.getElementDimensions(ya).height};sa=true;if(this.vpvdAnalysis){ra[ab].y=ba(ya).y;ra[ab].visible_position=xa;wa=Math.min(wa,xa);}}else if(sa){this._indexOfLastVisibleStoryOnPreviousPass=xa-va;break;}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(ab in ra)if(ra.hasOwnProperty(ab)){ra[ab].visible_position-=wa;this.numVisibleStories++;}}return ra;};pa.prototype.getTimetrackingDataToLog=function(qa){'use strict';var ra={evt:da,vpvd_start_timestamp:qa.evp_ts,vpvd_time_delta:Math.round(qa.vpvd),story_height:p.getElementDimensions(qa.story).height,viewport_height:this.cachedViewportHeight};return {ft:ra};};pa.prototype.recordTimeStoryWasInView=function(qa){'use strict';if(this.isTimetrackingEnabled&&qa.vpvd>0){var ra=this.getTimetrackingDataToLog(qa),sa=z(qa.story,['ft']);Object.assign(ra.ft,sa.ft);var ta=!!sa.ft.ei&&ra.ft.vpvd_time_delta>this.minTimeToReportImmediately;delete ra.ei;this.sendDataToLog(qa.story,ra,ta);}};pa.prototype.hasBeenVisible=function(qa){'use strict';return qa in this.readStoryIDs;};pa.prototype.isVisible=function(qa,ra,sa){'use strict';return this.getHeightIfVisible(qa,ra,sa)>0;};pa.prototype.getHeightIfVisible=function(qa,ra,sa){'use strict';if(ra===undefined)ra=this.isLoose;if(sa===undefined)sa=this.minSizeToBeVisible;var ta=w.getScrollPosition().y,ua=p.getViewportDimensions().height,va=ba(qa),wa=p.getElementDimensions(qa),xa=ua+this.maxScrollPosition-ta;if(!va.x&&!va.y&&!wa.x&&!wa.y)return false;if(ra&&va.y<xa)return true;var ya=Math.max(va.y,0),za=Math.min(va.y+wa.height,ua),ab=Math.min(wa.height,sa);return za-ya>=ab?za-ya:0;};pa.prototype.getHeightInViewport=function(qa){'use strict';var ra=p.getViewportDimensions().height,sa=ba(qa),ta=p.getElementDimensions(qa);if(!sa.x&&!sa.y&&!ta.x&&!ta.y)return false;var ua=Math.max(sa.y,0),va=Math.min(sa.y+ta.height,ra);return va-ua;};pa.prototype.sendDataToLog=function(qa,ra,sa){'use strict';if(this.useBanzai){var ta={};if(sa)ta.delay=3000;var ua=this.getSessionID();if(ua)ra.ft.session_id=ua;if(this.useWaterfallLogging&&ra.ft.evt==ea){ra.ft.should_waterfall_logging=1;ra.ft['interface']='www';var va=!this.initialStoriesLogged;this.waterfallLogStep(qa,'200_sent_to_banzai',va);}j.post('feed_tracking',ra,ta);}else y(fa,qa,null,'FORCE',ra);};pa.prototype.waterfallLogStep=function(qa,ra,sa){'use strict';var ta=this.getStoryID(qa);if(this.loggedStoryIDs[ra]&&this.loggedStoryIDs[ra][ta])return;var ua=this.getWaterfallData(qa,ra,sa);new i(ga,ua).send();if(!this.loggedStoryIDs[ra])this.loggedStoryIDs[ra]={};this.loggedStoryIDs[ra][ta]=true;};pa.prototype.getWaterfallData=function(qa,ra,sa){'use strict';var ta=this._getDataToLogImpl(qa),ua=z(qa,['ft']);Object.assign(ta.ft,ua.ft);var va=ta.ft;va.height_in_viewport=this.getHeightInViewport(qa);va.step=ra;va.is_initial_story=sa?1:0;va['interface']='www';return va;};pa.prototype.addSeenClassToStory=function(qa){'use strict';l.addClass(qa,"_50nb");l.removeClass(qa,"_50mx");l.removeClass(qa,"_2z-5");};pa.prototype.markStoryRead=function(qa){'use strict';var ra=this.getStoryID(qa);if(!ra||this.hasBeenVisible(ra))return;this.readStoryIDs[ra]=true;this.annotatedStoryIDs[ra]=true;var sa=this._getDataToLogImpl(qa),ta=z(qa,['ft']);Object.assign(sa.ft,ta.ft);delete sa.ei;this.sendDataToLog(qa,sa,false);l.addClass(qa,"_x72");if(this.vpvDebug)l.addClass(qa,"_5m7s");this.addSeenClassToStory(qa);};pa.prototype.logAnnotatedVPV=function(qa){'use strict';var ra=this.getStoryID(qa);if(!ra||ra in this.annotatedStoryIDs)return;this.annotatedStoryIDs[ra]=true;var sa=this._getDataToLogImpl(qa),ta=z(qa,['ft']);Object.assign(sa.ft,ta.ft);delete sa.ei;sa.ft.vpv_ft_only=1;this.sendDataToLog(qa,sa,false);};pa.prototype._getDataToLogImpl=function(qa){'use strict';var ra=this.getDataToLog(qa);if(!ra.ft)ra.ft={};return ra;};f.exports=pa;},null);
__d('collectSubtreeData',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k,l,m,n){if(j.offsetWidth===0&&j.offsetHeight===0)return n;var o={};if(j.getAttribute)for(s=0;s<k.length;s++){u=k[s];var p=j.getAttribute(l[u]);if(p){o[u]={};var q=JSON.parse(p);for(var r in m)if(q[r]!==undefined){o[u][r]=true;if(n[u]===undefined)n[u]={};if(n[u][r]===undefined)n[u][r]=[];if(m[r].length>0)n[u][r].push(m[r]);n[u][r].push('('+q[r]);}}}for(var s=0;s<j.childNodes.length;s++){var t=j.childNodes[s];h(t,k,l,m,n);}for(var u in o)for(var v in o[u]){var w=n[u][v][n[u][v].length-1];if(w.length>0&&w.charAt(0)=='('){n[u][v][n[u][v].length-1]=w.substr(1);}else n[u][v].push(')');}return n;}function i(j,k){var l={};for(var m=0;m<k.length;++m)l[k[m]]='data-'+k[m];var n={tn:"","tn-debug":","},o={};h(j,k,l,n,o);for(var p in o)for(var q in o[p])o[p][q]=o[p][q].join('');return o;}f.exports=i;},null);
__d('recordTNTreeData',['collectSubtreeData'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){var l={},m=h(j,['ft']);for(var n in m.ft){l[n+'_tree']=m.ft[n];if(n==='tn-debug')j.setAttribute('tn-debug_subtree',m.ft[n]);}l.evt_value=j.offsetHeight;if(k)l.offset=Math.max(0,j.offsetTop-k.offsetTop);return l;}f.exports=i;},null);
__d('NotificationJewelReminder',['Arbiter','ContextualDialog','ContextualDialogXUITheme','DOM','Event','ImageBlock.react','LayerFadeOnHide','LayerFadeOnShow','NotificationStore','NotificationUpdates','React','SubscriptionsHandler','Toggler','$','cx','fbt','intlList'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();var y=2,z="fbRequestsJewel",aa="fbNotificationsJewel";function ba(ca){'use strict';this.$NotificationJewelReminder1=ca;if(ca.request.count>0&&ca.show_request){this.$NotificationJewelReminder2(z);}else this.$NotificationJewelReminder3();}ba.prototype.$NotificationJewelReminder3=function(){'use strict';if(!this.$NotificationJewelReminder1.show_notif){return;}else{this.$NotificationJewelReminder4();return;}};ba.prototype.$NotificationJewelReminder4=function(){'use strict';this.$NotificationJewelReminder5=q.subscribe('update-notifications',(function(ca,da){if(da.nodes)this.$NotificationJewelReminder6(da.nodes);}).bind(this));p.getNotifications(Number.isInteger(this.$NotificationJewelReminder1.show_notif)?this.$NotificationJewelReminder1.show_notif:0,this.$NotificationJewelReminder6.bind(this));};ba.prototype.$NotificationJewelReminder6=function(ca){'use strict';if(this.$NotificationJewelReminder5){this.$NotificationJewelReminder5.unsubscribe();this.$NotificationJewelReminder5=null;}var da=t.getInstance(u(aa));if(da&&da.isShown())return;var ea=[],fa,ga=Object.keys(ca);for(var ha=0;ha<ga.length;ha++){if(!ca[ga[ha]].showBeep)continue;var ia=ca[ga[ha]].actors;if(ia.length===0)continue;for(var ja=0;ja<ia.length;ja++){fa=fa||ia[ja].profile_picture.uri;if(ea.length<y&&ia[ja].name&&ea.indexOf(ia[ja].name)===-1)ea.push(ia[ja].name);}if(ea.length===y)break;}if(ea.length===0||!fa)return;var ka=this.$NotificationJewelReminder7(fa,ea,ga.length,aa);this.$NotificationJewelReminder8(ka);};ba.prototype.$NotificationJewelReminder7=function(ca,da,ea,fa){'use strict';var ga=r.createElement('div',{className:"_5bov"},r.createElement(m,null,r.createElement('img',{className:"_5bow",src:ca}),r.createElement('div',null,this.$NotificationJewelReminder9(ea,da,fa)))),ha=k.create('div');r.render(ga,ha);var ia=new i({alignment:'right',contextSelector:'#'+fa+' a.jewelButton',offsetY:-10,position:'below',theme:j,width:210},ha);ia.enableBehaviors([o,n]);return ia;};ba.prototype.$NotificationJewelReminder9=function(ca,da,ea){'use strict';da=da.map(function(fa){return r.createElement('b',null,fa);});if(ea===aa){return w._({"*":{"notifications":"{number} notifications from {notification senders}","notification":"{number} notification from {notification senders}"}},[w.param("number",ca,[0]),w['enum'](ca>1?'notifications':'notification',{notifications:'notifications',notification:'notification'}),w.param("notification senders",x(da))]);}else return w._({"*":{"requests":"{number} friend requests from {request senders}","request":"{number} friend request from {request senders}"}},[w.param("number",ca,[0]),w['enum'](ca>1?'requests':'request',{requests:'requests',request:'request'}),w.param("request senders",x(da))]);};ba.prototype.$NotificationJewelReminder8=function(ca){'use strict';ca.show();this.$NotificationJewelReminder10=ca;var da=ca.getRoot();this.$NotificationJewelReminder11=setTimeout(this.$NotificationJewelReminder12.bind(this),this.$NotificationJewelReminder1.show_time);this.$NotificationJewelReminder13=new s();this.$NotificationJewelReminder13.addSubscriptions(h.subscribe('layer_shown',(function(ea,fa){if(fa&&fa.type==='Jewel')this.$NotificationJewelReminder12();}).bind(this)),l.listen(da,'mouseenter',(function(){clearTimeout(this.$NotificationJewelReminder11);}).bind(this)),l.listen(da,'mouseleave',this.$NotificationJewelReminder12.bind(this)),l.listen(da,'click',(function(){this.$NotificationJewelReminder12();t.show(u(aa));}).bind(this)));};ba.prototype.$NotificationJewelReminder12=function(){'use strict';clearTimeout(this.$NotificationJewelReminder11);this.$NotificationJewelReminder10.hide();this.$NotificationJewelReminder13.release();};ba.prototype.$NotificationJewelReminder2=function(ca){'use strict';if(!this.$NotificationJewelReminder1.show_request||!this.$NotificationJewelReminder1.request.count)return;var da=t.getInstance(u(ca));if(da&&da.isShown())return;var ea=this.$NotificationJewelReminder7(this.$NotificationJewelReminder1.request.pics[0],this.$NotificationJewelReminder1.request.names,this.$NotificationJewelReminder1.request.count,ca);this.$NotificationJewelReminder14(ea);};ba.prototype.$NotificationJewelReminder14=function(ca){'use strict';ca.show();this.$NotificationJewelReminder15=ca;var da=ca.getRoot();this.$NotificationJewelReminder16=setTimeout(this.$NotificationJewelReminder17.bind(this),this.$NotificationJewelReminder1.show_time);this.$NotificationJewelReminder18=new s();this.$NotificationJewelReminder18.addSubscriptions(h.subscribe('layer_shown',(function(ea,fa){if(fa&&fa.type==='Jewel')this.$NotificationJewelReminder17();}).bind(this)),l.listen(da,'mouseenter',(function(){clearTimeout(this.$NotificationJewelReminder16);}).bind(this)),l.listen(da,'mouseleave',this.$NotificationJewelReminder17.bind(this)),l.listen(da,'click',(function(){this.$NotificationJewelReminder17();t.show(u(z));}).bind(this)));};ba.prototype.$NotificationJewelReminder17=function(){'use strict';clearTimeout(this.$NotificationJewelReminder16);this.$NotificationJewelReminder15.hide();this.$NotificationJewelReminder18.release();this.$NotificationJewelReminder3();};f.exports=ba;},null);
__d('PagesVoiceBar',['$','Arbiter','AsyncRequest','BlueBar','ChannelConstants','DOM','URI','ViewportBounds'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p='PagesVoiceBar/initialized',q='PagesVoiceBar/switchVoice',r='page_transition',s='pages_voice_bar_sync',t=null,u=null,v=false,w=false,x=o.addTop(0);function y(ea,fa){new j('/ajax/pages/switch_voice.php').setData(fa).setHandler(function(ga){ca();}).send();}function z(){t=null;}function aa(ea,fa){if(fa.obj.profile_id&&fa.obj.profile_id===t)ca();}function ba(ea){i.subscribe(p,ea);}function ca(){n.getNextURI().go();}var da={initVoiceBar:function(){if(w)return;u=h('pagesVoiceBarContent');i.subscribe(q,y);i.subscribe(r,z);i.subscribe(l.getArbiterType(s),aa);w=true;v=m.contains(k.getBar(),u);i.inform(p,null,i.BEHAVIOR_STATE);},update:function(ea,fa){ba(function(){t=fa;m.setContent(u,ea);var ga=u.offsetHeight;if(!v&&x.getSize()!==ga){x.remove();x=o.addTop(o.getTop()+ga);}});}};f.exports=da;},null);
__d("XPrivacyCheckupSpawnDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/checkup\/dialog\/show\/",{source:{type:"Enum",enumType:1}});},null,{});
__d("XPrivacyRemindersDismissController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/reminders\/dismiss\/",{type:{type:"String",required:true},log_plite:{type:"Bool",defaultValue:false}});},null,{});
__d('PrivacyLiteFlyout',['Animation','Arbiter','ArbiterMixin','AsyncDialog','AsyncRequest','Banzai','CSS','DOM','Ease','Event','PrivacyConst','Style','SubscriptionsHandler','Toggler','XPrivacyCheckupSpawnDialogController','XPrivacyRemindersDismissController','csx','cx','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa=Object.assign||function(ka){for(var la=1;la<arguments.length;la++){var ma=arguments[la];for(var na in ma)if(Object.prototype.hasOwnProperty.call(ma,na))ka[na]=ma[na];}return ka;},ba='PrivacyLiteFlyout/expandingSection',ca={},da={};function ea(ka,la,ma){var na=la?0:ka.offsetHeight;s.set(ka,'height',na+'px');s.set(ka,'overflow','hidden');n.show(ka);var oa=la?ka.scrollHeight:0,pa=o.getID(ka);ca[pa]&&ca[pa].stop();ca[pa]=new h(ka).to('height',oa).ondone(function(){ca[pa]=null;s.set(ka,'height','');s.set(ka,'overflow','');oa||n.hide(ka);ma();}).duration(Math.abs(oa-na)*1.5).ease(p.sineOut).go();}function fa(ka){var event='other_section';switch(ka){case 'who_can_see':case 'who_can_contact':case 'how_to_stop':event=ka;break;}return event;}var ga=null,ha=false,ia=false,ja=aa({loadBody:function(){this._loadBody(false);},loadBodyFromMegaphone:function(){this._loadBody(true);},_loadBody:function(ka){if(!ha&&z('fbPrivacyLiteFlyoutLoading')){ha=true;new l('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:ka}).send();}},_addListener:function(ka,event,la){return q.listen(ka,'click',function(){m.post('privacy_lite',{event:event,exit_point:la});});},addLoggingElem:function(ka,event,la){var ma=this._loggingElements.length,na={elem:ka,event:event,exit:la};this._loggingElements[ma]=na;},registerSettingsAndBasicsLinkLogging:function(ka,event,la,ma){var na=o.scry(ka,"._5cw0")[0],oa=o.scry(ka,"._3djx")[0];if(na){this._settingsLinkListener&&this._settingsLinkListener.release();this._settingsLinkListener=this._addListener(na,event,la);}if(oa){this._privacyBasicsLinkListener&&this._privacyBasicsLinkListener.release();this._privacyBasicsLinkListener=this._addListener(oa,event,ma);}},_subscribeListeners:function(){this._loggingElements&&this._loggingElements.forEach(function(ka){this._subscriptions&&this._subscriptions.addSubscriptions(this._addListener(ka.elem,ka.event,ka.exit));},this);},renderBody:function(ka,la){var ma=z('fbPrivacyLiteFlyoutLoading');if(ma){o.replace(ma,ka);ja.registerCallback(function(){ja.inform('load',null,i.BEHAVIOR_STATE);},la);}},hideCleanup:function(ka){i.inform(ba);var la=o.scry(ka,"._2va0").forEach(function(ma){n.removeClass(ma,"_2va0");});},registerFlyoutToggler:function(ka,la,ma){this._loggingElements=[];ga=la;var na=u.createInstance(ka);na.setSticky(false);u.listen(['show','hide'],la,(function(oa){ja.inform(oa);ia=oa==='show';if(!ia){ja.hideCleanup(ka);na.hide();this._subscriptions&&this._subscriptions.release();this._subscriptions=null;i.inform('layer_hidden',{type:'PrivacyShortcutsFlyout'});}else{i.inform('layer_shown',{type:'PrivacyShortcutsFlyout'});if(ma){ma.start(this);ma=null;}i.subscribeOnce(ba,(function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=new t();this._subscribeListeners();}).bind(this));m.post('privacy_lite',{event:'show_flyout',exit_point:null});}}).bind(this));},isFlyoutVisible:function(){return ga&&u.getActive()===ga;},exists:function(){return !!o.scry(document.body,"._59fc")[0];},setFlyoutVisible:function(ka){ka?u.show(ga):u.hide(ga);},showSection:function(ka){var la=da[ka];if(!la)return;if(!la.sublist_container){ja.inform('expanded',ka,i.BEHAVIOR_STATE);return;}var ma=la.chevron,na=la.sublist_container;i.inform(ba,ma);if(ja.inform('expand',ka)!==false){n.removeClass(ma,"_9or");n.addClass(ma,"_9os");ea(na,true,function(){ja.inform('expanded',ka);});}},hideSection:function(ka,la,ma){var na=da[ka],oa=na.chevron,pa=na.sublist_container;if(ma===oa)return;if(ja.inform('collapse',ka)!==false){n.addClass(oa,"_9or");n.removeClass(oa,"_9os");ea(pa,false,function(){ja.inform('collapsed',ka);});}},toggleSection:function(ka){var la=da[ka].chevron;u.getInstance(la).hide();if(n.hasClass(la,"_9or")){ja.showSection(ka);m.post('privacy_lite',{event:fa(ka)+'_expand',exit_point:null});new l('/ajax/privacy/privacy_lite/log_section_expand').setData({section:ka}).send();}else{ja.hideSection(ka);m.post('privacy_lite',{event:fa(ka)+'_collapse',exit_point:null});}},registerSection:function(ka,la){da[ka]=la;if(la.sublist_container){i.subscribe(ba,ja.hideSection.bind(null,ka));q.listen(la.section_block,'click',ja.toggleSection.bind(null,ka));}ja.inform(ka);},registerInlineHelpOnAudienceChangeNewSelector:function(ka,la,ma,na){ka=ka.getInstance();ka.subscribe('changed',(function(oa){this._registerInlineHelpOnAudienceChange(la,ma,na,ka.getSelectedBaseValue());}).bind(this));},registerSelectorLogging:function(ka,la,ma,na){ka=ka.getInstance();ka.subscribe('open',function(){m.post('privacy_lite',{event:la,exit_point:null});});ka.subscribe('close',function(){m.post('privacy_lite',{event:ma,exit_point:null});});ka.subscribe('changed',function(){m.post('privacy_lite',{event:na,exit_point:null});});},_registerInlineHelpOnAudienceChange:function(ka,la,ma,na){var oa=o.find(ka,"._9o_"),pa=o.find(ka,"._2v9_");if(ma){var qa=o.find(ka,"._5n9w"),ra=na==r.BaseValue.EVERYONE;n.conditionShow(qa,ra);n.conditionShow(oa,!ra);if(qa&&ra){var sa=w.getURIBuilder().setString('type','delta_everyone').setBool('log_plite',true).getURI();new l(sa).send();}}else n.show(oa);n.hide(pa);if(la)new l('/ajax/privacy/privacy_lite/kill_intro').send();},registerInlineHelpXOutOnClick:function(ka,la,ma){q.listen(ka,'click',function(){n.addClass(la,"_9p0");});},registerBlockUnhideOnFocus:function(ka,la){q.listen(ka,'focus',(function(ma){n.show(ma);m.post('privacy_lite',{event:'block_user_input_click',exit_point:null});}).bind(this,la));},registerMessageFilterSettingOnClick:function(ka,la){var ma=o.find(ka,"._fv0");q.listen(ka,'click',function(){if(ma.checked){new l('/ajax/mercury/change_filtering_type.php').setData({filtering_type:la,source:'privacy_lite'}).send();}else{var event='basic_filtering';if(la==='strict')event='strict_filtering';m.post('privacy_lite',{event:event,exit_point:null});}});},registerPrivacyCheckupListener:function(ka){q.listen(ka,'click',(function(){this.setFlyoutVisible(false);k.send(new l(v.getURIBuilder().setEnum('source','plite').getURI()));m.post('privacy_lite',{event:'exit_flyout',exit_point:'privacy_checkup'});}).bind(this));},displayPrivacyCheckup:function(ka){ka.show();}},j);f.exports=ja;},null);
__d('PrivacyLiteFlyoutHelp',['Event','Arbiter','AsyncRequest','Banzai','ContextualHelpSearchController','CSS','DOM','Parent','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;function t(u,v,w,x,y){this._width=315;s=n.find(v,'input');var z=n.create('div');this.init(u,s,z,w,x,{focusSearchBox:false});r=o.byClass(v,"_8-a");h.listen(y,'click',(function(){this._hideSearch(this);k.post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}).bind(this));i.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var aa=n.scry(r,"._d1r")[0];aa&&h.listen(aa,'click',(function(){m.addClass(r,"_aw6");s.focus();k.post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new j('/ajax/privacy/privacy_lite/help_suggestions').setHandler((function(ba){var ca=ba.getPayload().searchSuggestions,da=n.find(r,"._4_8m");n.setContent(da,ca);m.addClass(r,"_4_8l");}).bind(this)).send();}).bind(this));}Object.assign(t.prototype,new l(),l.prototype,{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();m.removeClass(r,"_aw6");},show:function(u){if(u===this.topics_area){m.removeClass(r,"_aw7");return;}else if(u===this.loader){m.addClass(r,"_aw7");m.hide(this.results_area);}else m.hide(this.loader);m.show(u);}});f.exports=t;},null);
__d('ViewasChromeBar',['Event','Arbiter','AsyncRequest','CSS','DOM','Focus','ModalMask','PageTransitionsRegistrar','Parent','cx','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s='ViewasChromeBar/initialized',t=null,u=false;function v(y){i.subscribe(s,y);}function w(y){k.addClass(y,"_7g7");var z=l.find(y,"._7g0");m.set(l.find(z,'.textInput'));}var x={initChromeBar:function(y){if(u)return;t=y;u=true;i.inform(s,null,i.BEHAVIOR_STATE);},update:function(y,z){v(function(){l.setContent(t,y);if(z)new j('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(y){h.listen(y,'click',w.bind(null,p.byClass(y,"_7f-")));},registerFlyoutModalMask:function(){n.show();o.registerHandler(n.hide,10);}};f.exports=x;},null);
__d('CurationCaretNux',['csx','cx','ge','tidyEvent','Arbiter','AsyncRequest','CSS','DataStore','DOM','Event','NavigationMessage','Parent','Rect'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u="div._1zpr",v="_5jmm",w='CurationCaretNux_instance',x='CurationCaretNux_caretMenuLoaded',y=100,z="caret_nux",aa="save_option_nux",ba="seen",ca="dismissed",da="focus",ea="click",fa="scroll",ga=false;function ha(ia,ja,ka,la){'use strict';var ma=j(la);if(ma){this.container=ma;this.caret=ka;this.caretNux=ia.instance;this.caretNuxData=ia;this.saveOptionNux=ja.instance;this.saveOptionNuxData=ja;this.popoverTriggered=false;var na=s.byClass(ma,v);o.set(na,w,this);this.$CurationCaretNux1();l.subscribeOnce(r.NAVIGATION_BEGIN,(function(){this.caretNux&&this.caretNux.hide();this.saveOptionNux&&this.saveOptionNux.hide();}).bind(this));}}ha.prototype.$CurationCaretNux1=function(){'use strict';var ia=p.scry(this.container,u);if(ia.length>0)k([q.listen(ia[0],'click',(function(){if(ga)return;this.caretNux.subscribe('show',(function(){this.$CurationCaretNux2();}).bind(this));this.caretNux.subscribe('hide',(function(){this.$CurationCaretNux3();if(ga){this.$CurationCaretNux4(z,ba);this.$CurationCaretNux4(z,ca);}}).bind(this));this.$CurationCaretNux5();this.interactionTime=0;setTimeout((function(){if(!this.$CurationCaretNux6()){ga=true;this.caretNux.show();}}).bind(this),this.caretNuxData.min_consume_duration);setTimeout((function(){if(!this.$CurationCaretNux6()){ga=false;this.caretNux.hide();}}).bind(this),this.caretNuxData.max_consume_duration);var ja=Date.now();setTimeout((function(){this.$CurationCaretNux7((function(){if(!this.interactionTime)this.interactionTime=Date.now()-ja;}).bind(this));}).bind(this),0);}).bind(this))]);};ha.prototype.$CurationCaretNux6=function(){'use strict';return this.interactionTime&&this.interactionTime>0;};ha.prototype.$CurationCaretNux2=function(){'use strict';this.caretClickListener=q.listen(this.caret,'click',(function(){this.caretNux.hide();if(this.saveOptionNux){this.popoverTriggered=true;this.$CurationCaretNux8();}}).bind(this));var ia=false;this.$CurationCaretNux7((function(ja){if(ia||ja===ea||!this.caretNux.isShown())return;var ka=t.getViewportWithoutScrollbarsBounds(),la=t.getElementBounds(this.caretNux.getContentRoot());la=la.sub(0,y);if(ka.contains(la)){this.$CurationCaretNux4(z,ba);ia=true;}}).bind(this));};ha.prototype.$CurationCaretNux3=function(){'use strict';this.caretClickListener.remove();this.$CurationCaretNux9();};ha.prototype.$CurationCaretNux8=function(){'use strict';if(this.$CurationCaretNux10()&&this.popoverTriggered)setTimeout((function(){var ia=p.scry(document,"li.save_caret_menu_item");for(var ja=0;ja<ia.length;ja++){var ka=ia[ja],la=s.byClass(ka,"uiLayer");if(la&&n.shown(la)){this.saveOptionNux.setContext(ka);break;}}this.saveOptionNux.show();this.$CurationCaretNux4(aa,ba);var ma=o.get(this.caret,'Popover');ma&&ma.subscribeOnce('hide',(function(){this.saveOptionNux.hide();}).bind(this));}).bind(this),0);};ha.prototype.$CurationCaretNux4=function(ia,ja){'use strict';var ka;if(ia===z){ka=this.caretNuxData;}else if(ia===aa){ka=this.saveOptionNuxData;}else throw "Invalid nux type";var la;if(ja===ba){la=ka.seen_uri;ka.seen_uri=null;}else if(ja===ca){la=ka.dismiss_uri;ka.dismiss_uri=null;}else throw "Invalid impression type";if(la){var ma=new m(la);if(this.interactionTime&&ia===z)ma.setData({interaction_time:this.interactionTime});ma.send();}};ha.prototype.$CurationCaretNux7=function(ia){'use strict';this.$CurationCaretNux11.push(ia);};ha.prototype.$CurationCaretNux12=function(ia){'use strict';this.$CurationCaretNux11.forEach(function(ja){ja.call(this,ia);},this);};ha.prototype.$CurationCaretNux5=function(){'use strict';if(!this.$CurationCaretNux13){this.$CurationCaretNux11=[];this.$CurationCaretNux13=[q.listen(window,'click',this.$CurationCaretNux12.bind(this,ea)),q.listen(window,'focus',this.$CurationCaretNux12.bind(this,da)),q.listen(window,'scroll',this.$CurationCaretNux12.bind(this,fa))];}};ha.prototype.$CurationCaretNux9=function(ia){'use strict';if(this.$CurationCaretNux13){while(this.$CurationCaretNux13.length)this.$CurationCaretNux13.pop().remove();this.$CurationCaretNux13=null;this.$CurationCaretNux11=null;}};ha.prototype.$CurationCaretNux10=function(){'use strict';var ia=s.byClass(this.container,v);return o.get(ia,x)===true;};ha.saveOptionLoaded=function(ia){'use strict';var ja=j(ia);if(ja){var ka=s.byClass(ja,v);o.set(ka,x,true);var la=o.get(ka,w);la&&la.$CurationCaretNux8();}};f.exports=ha;},null);
__d("StoryTopicMap",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={registerTopics:function(j,k){h[j]=k;},getTopicsForFTID:function(j){return h[j]||[];}};f.exports=i;},null);
__d("XEventRelatedEventsPivotController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/events\/async\/related_events_pivot\/",{event_id:{type:"Int",required:true},attachment_id:{type:"String",required:true}});},null,{});
__d("XSearchRelatedPostsPivotController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/async\/related_posts_pivot\/",{origin:{type:"String",required:true},content_id:{type:"String",required:true}});},null,{});
__d("XFeedAdsChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/ads_chaining\/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});},null,{});
__d("XPubcontentFeedChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true}});},null,{});
__d("XPubcontentRelatedShareChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false}});},null,{});
__d("XPubcontentRelatedVideoChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/related_video\/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"}});},null,{});
__d("XPubcontentTopicChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/topic_chaining\/",{pivotal_topic_ids:{type:"IntVector",defaultValue:[]}});},null,{});
__d("XPubcontentInlineStoryPivotChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});},null,{});
__d("XRelatedGamesChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/related_games\/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}});},null,{});
__d("XTopicConversationFeedPivotChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/discussions\/creation_unit\/",{});},null,{});
__d('PubcontentFeedChainingController',['AggregatedLinkComposerConfig','Arbiter','AsyncRequest','AttachmentRelatedShareConstants','CreateTopicConversationChainingConfig','CSS','cx','DOM','DOMQuery','FeedAdsChainingConfig','NavigationMessage','PageLikeConstants','PubcontentFeedChainingConfig','PubcontentRelatedShareChainingConfig','PubcontentTopicChainingConfig','StoryInlinePivotChainingConfig','RelatedEventsPivotChainingConfig','Run','SearchRelatedPostsPivotChainingConfig','StoryTopicMap','SubscriptionsHandler','UFIFeedbackTargets','UFIUIEvents','XEventRelatedEventsPivotController','XSearchRelatedPostsPivotController','XFeedAdsChainingController','XPubcontentFeedChainingController','XPubcontentRelatedShareChainingController','XPubcontentRelatedVideoChainingController','XPubcontentTopicChainingController','XPubcontentInlineStoryPivotChainingController','XRelatedGamesChainingController','XTopicConversationFeedPivotChainingController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){if(c.__markCompiled)c.__markCompiled();var oa='ei',pa='ad_fan_page_action',qa='ad_like_page_post_action',ra='page_story_like_action',sa='related_share_article_click',ta='related_share_video_click',ua='page_share_like_action',va='topic_story_like_action',wa='story_click_for_pivot_action',xa='story_like_pivot_action',ya='event_join',za='comment_on_topic_conversation_target_action',ab='composer_publish_action';function bb(){'use strict';this.$PubcontentFeedChainingController1=t;this.$PubcontentFeedChainingController2=q;this.$PubcontentFeedChainingController3=u;this.$PubcontentFeedChainingController4=v;this.$PubcontentFeedChainingController5=w;this.$PubcontentFeedChainingController6=x;this.$PubcontentFeedChainingController7=z;this.$PubcontentFeedChainingController8=l;this.$PubcontentFeedChainingController9={};this.registerEvents();bb.instance=this;}bb.prototype.registerEvents=function(){'use strict';if(this.$PubcontentFeedChainingController10)return;this.$PubcontentFeedChainingController10=new ba();this.$PubcontentFeedChainingController10.addSubscriptions(i.subscribe(r.NAVIGATION_BEGIN,this.$PubcontentFeedChainingController11.bind(this)),i.subscribe(s.LIKED,this.$PubcontentFeedChainingController12.bind(this)),i.subscribe(da.UFIActionLinkLike,this.$PubcontentFeedChainingController13.bind(this)),i.subscribe(da.UFIActionAddComment,this.$PubcontentFeedChainingController14.bind(this)),i.subscribe('composer/publish',this.$PubcontentFeedChainingController15.bind(this)),i.subscribe('LitestandComposer/publish',this.$PubcontentFeedChainingController15.bind(this)),i.subscribe(k.ARTICLE_CLICK,this.$PubcontentFeedChainingController16.bind(this)),i.subscribe(k.VIDEO_CLICK,this.$PubcontentFeedChainingController17.bind(this)),i.subscribe(k.FBVIDEO_CLICK,this.$PubcontentFeedChainingController18.bind(this)),i.subscribe(k.GAME_CLICK,this.$PubcontentFeedChainingController19.bind(this)),i.subscribe(k.PHOTO_CLICK,this.$PubcontentFeedChainingController20.bind(this)),i.subscribe(k.EVENT_JOIN,this.$PubcontentFeedChainingController21.bind(this)));y.onLeave(this.$PubcontentFeedChainingController11.bind(this));};bb.prototype.$PubcontentFeedChainingController11=function(){'use strict';this.$PubcontentFeedChainingController10&&this.$PubcontentFeedChainingController10.release();this.$PubcontentFeedChainingController10=null;};bb.getAdClientTokenIndex=function(){'use strict';return oa;};bb.prototype.$PubcontentFeedChainingController12=function(cb,db){'use strict';var eb=this.findAdClientToken(db.target);if(eb){this.$PubcontentFeedChainingController22(db.target,{origin:pa,actor_id:db.profile_id,client_token:eb});}else this.$PubcontentFeedChainingController23(db.target,{origin:db.origin,actor_id:db.profile_id});};bb.prototype.$PubcontentFeedChainingController14=function(cb,db){'use strict';if(!db.feedback)return;var eb=this.$PubcontentFeedChainingController24(db.target,{origin:za,data:db});if(!eb)return false;var fb=na.getURIBuilder().getURI();new j(fb).setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,eb.story.id)).setRelativeTo(eb.chainingWrapper).setMethod('POST').setData({story_id:db.feedback.entidentifier}).send();return true;};bb.prototype.$PubcontentFeedChainingController13=function(cb,db){'use strict';if(!db.ft_id)return;if(!this.$PubcontentFeedChainingController26(this.findStory(db.target)))return;ca.getFeedbackTarget(db.ft_id,(function(eb,fb){var gb=this.findAdClientToken(eb);if(gb&&fb.isshare){this.$PubcontentFeedChainingController22(eb,{actor_id:fb.actorid,origin:qa,ft_id:fb.entidentifier,client_token:gb});}else if(fb.isownerpage){this.$PubcontentFeedChainingController23(eb,{actor_id:fb.actorid,content_id:fb.entidentifier,origin:ra});}else if(fb.isshare){this.$PubcontentFeedChainingController23(eb,{actor_id:fb.actorid,content_id:fb.entidentifier,ft_id:fb.entidentifier,origin:ua});}else{var hb=aa.getTopicsForFTID(fb.entidentifier);if(hb&&hb.length>0){this.$PubcontentFeedChainingController27(eb,{ft_id:fb.entidentifier,origin:va,pivotal_topic_ids:hb});}else this.$PubcontentFeedChainingController28(eb,{origin:xa,ft_id:fb.entidentifier});}}).bind(this,db.target));};bb.prototype.$PubcontentFeedChainingController28=function(cb,db){'use strict';var eb=this.$PubcontentFeedChainingController24(cb,db);if(!eb)return false;var fb=la.getURIBuilder().setString('origin',db.origin);if(db.story_id)fb.setString('storyid',String(db.story_id));if(db.ft_id)fb.setString('ftid',String(db.ft_id));new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,eb.story.id)).setRelativeTo(eb.chainingWrapper).setURI(fb.getURI()).setAllowCrossPageTransition(true).send();return true;};bb.prototype.$PubcontentFeedChainingController20=function(cb,db){'use strict';var eb=this;eb.$PubcontentFeedChainingController28(db.attachment,{origin:wa,story_id:db.storyid});};bb.prototype.$PubcontentFeedChainingController16=function(cb,db){'use strict';if(h.no_chained_related_stories==='true')return;db.origin=sa;var eb=this,fb=this.findStory(db.attachment),gb=p.scry(p.getRootElement(),'#initial_browse_result').length>0;if(gb)return;var hb;if(db.is_right_click){hb=0;}else hb=k.EVENT_DELAY;setTimeout(function(){if(fb){var ib=eb.findAttachment(fb);if(ib)db.attachment=ib;}eb.$PubcontentFeedChainingController29(db.attachment,db);},hb);};bb.prototype.$PubcontentFeedChainingController17=function(cb,db){'use strict';db.origin=ta;var eb=this,fb=this.findStory(db.attachment);setTimeout(function(){if(fb){var gb=eb.findAttachment(fb);if(gb)db.attachment=gb;}eb.$PubcontentFeedChainingController29(db.attachment,db);},k.EVENT_DELAY);};bb.prototype.$PubcontentFeedChainingController18=function(cb,db){'use strict';db.origin=ta;var eb=this,fb=this.findStory(db.attachment);setTimeout(function(){if(fb){var gb=eb.findAttachment(fb);if(gb)db.attachment=gb;}eb.$PubcontentFeedChainingController29(db.attachment,db);},k.EVENT_DELAY);};bb.prototype.$PubcontentFeedChainingController19=function(cb,db){'use strict';var eb=this,fb=this.findStory(db.attachment);setTimeout(function(){if(fb)var gb=eb.findContainer(fb);eb.$PubcontentFeedChainingController30(fb,db.global_share_id,o.getID(gb));},k.EVENT_DELAY);};bb.prototype.$PubcontentFeedChainingController21=function(cb,db){'use strict';var eb=this.findStory(db.attachment);if(eb){var fb=this.findAttachment(eb);if(fb)db.attachment=fb;}this.$PubcontentFeedChainingController31(db.attachment,{origin:ya,event_id:db.event_id});};bb.prototype.$PubcontentFeedChainingController15=function(cb,db){'use strict';var eb=this;setTimeout(function(){eb.$PubcontentFeedChainingController32(db.markup.firstChild,{origin:ab,content_id:db.content_id});},this.$PubcontentFeedChainingController7.composer_publish_action);};bb.prototype.$PubcontentFeedChainingController33=function(cb){'use strict';return !!(cb&&cb.id&&!m.hasClass(cb,"_sf6")&&!(cb.id in this.$PubcontentFeedChainingController9));};bb.prototype.$PubcontentFeedChainingController34=function(cb){'use strict';if(!cb)return false;if(cb.origin in this.$PubcontentFeedChainingController1||cb.origin in this.$PubcontentFeedChainingController3||cb.origin in this.$PubcontentFeedChainingController2||cb.origin in this.$PubcontentFeedChainingController5||cb.origin in this.$PubcontentFeedChainingController6||cb.origin in this.$PubcontentFeedChainingController8||cb.origin in this.$PubcontentFeedChainingController7){return true;}else{var db=this.$PubcontentFeedChainingController4[cb.origin];if(!db||!db.rate)return false;var eb=Math.random();if(eb>db.rate)return false;return true;}};bb.prototype.$PubcontentFeedChainingController35=function(cb){'use strict';this.$PubcontentFeedChainingController9[cb]=true;};bb.prototype.$PubcontentFeedChainingController25=function(cb){'use strict';delete this.$PubcontentFeedChainingController9[cb];};bb.prototype.$PubcontentFeedChainingController26=function(cb){'use strict';if(!cb)return false;var db="_3lkn",eb=cb.nextSibling,fb=true;if(eb&&eb.firstChild){var gb=eb.firstChild;fb=!(gb.hasChildNodes()&&m.hasClass(gb,db));}if(!fb)return false;var hb=cb.children[0],ib=cb.children[1],jb="_4_ck";if(hb&&m.hasClass(hb,jb)||ib&&m.hasClass(ib,jb))return false;return true;};bb.prototype.$PubcontentFeedChainingController24=function(cb,db){'use strict';var eb=this.findStory(cb);if(!this.$PubcontentFeedChainingController33(eb))return null;if(!this.$PubcontentFeedChainingController34(db))return null;this.$PubcontentFeedChainingController35(eb.id);if(this.isSponsoredStory(eb))return null;var fb;if(!db.continued_chaining){fb=this.findContainer(eb);if(!fb)return null;var gb=o.create('div'),hb=o.appendContent(fb,gb);if(hb.length!==1)return null;}else{fb=eb;gb=o.create('div');hb=o.insertAfter(fb,gb);o.remove(fb);if(hb.length!==1)return null;}if(db.is_auto_expand){return {chainingWrapper:hb[0],story:eb,is_auto_expand:db.is_auto_expand};}else return {chainingWrapper:hb[0],story:eb};};bb.prototype.$PubcontentFeedChainingController22=function(cb,db){'use strict';var eb=this.$PubcontentFeedChainingController24(cb,db);if(!eb)return false;var fb=this.findStreamRoot(eb.story);if(!fb)return false;var gb=fb.getAttribute('id'),hb=ga.getURIBuilder().setString('actor_id',db.actor_id).setString('origin',db.origin).setString('ei',db.client_token).setString('data_ownerid',gb);if(db.ft_id)hb.setString('ft_id',db.ft_id);new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,eb.story.id)).setRelativeTo(eb.chainingWrapper).setURI(hb.getURI()).send();return true;};bb.prototype.$PubcontentFeedChainingController29=function(cb,db){'use strict';if(!this.$PubcontentFeedChainingController26(this.findStory(cb)))return false;var eb=this.$PubcontentFeedChainingController24(cb,db);if(!eb)return false;m.addClass(eb.chainingWrapper,"_3lkn");var fb=null;if(db.fbvideo_id){fb=ja.getURIBuilder();fb.setInt('fbvideo_id',db.fbvideo_id);}else{fb=ia.getURIBuilder();fb.setInt('global_share_id',db.global_share_id);}fb.setString('attachment_div_id',o.getID(db.attachment));if(db.link_url)fb.setString('link_url',db.link_url);if(db.video_div_id)fb.setString('video_div_id',db.video_div_id);if(db.share_id)fb.setString('share_id',db.share_id);var gb=JSON.parse(eb.story.getAttribute('data-ft'))||{};if('qid' in gb&&'mf_story_key' in gb){fb.setString('qid',gb.qid);fb.setString('mf_story_key',gb.mf_story_key);}if(db.is_auto_expand){this.$PubcontentFeedChainingController25(eb.story.id);fb.setBool('is_auto_expand',db.is_auto_expand);}var hb=new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,eb.story.id)).setRelativeTo(eb.chainingWrapper).setURI(fb.getURI());gb&&hb.setData(gb);hb.send();return true;};bb.prototype.$PubcontentFeedChainingController30=function(cb,db,eb){'use strict';if(!this.$PubcontentFeedChainingController33(cb))return;this.$PubcontentFeedChainingController35(cb.id);var fb=ma.getURIBuilder().setInt('app_id',db).setString('attachment_div_id',eb);new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,cb.id)).setURI(fb.getURI()).send();return true;};bb.prototype.$PubcontentFeedChainingController23=function(cb,db){'use strict';var eb=this.$PubcontentFeedChainingController24(cb,db);if(!eb)return false;var fb=ha.getURIBuilder().setString('actor_id',db.actor_id).setString('origin',db.origin);if(db.ft_id)fb.setString('ft_id',db.ft_id);if(db.content_id)fb.setString('content_id',db.content_id);new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,eb.story.id)).setRelativeTo(eb.chainingWrapper).setURI(fb.getURI()).send();return true;};bb.prototype.$PubcontentFeedChainingController27=function(cb,db){'use strict';var eb=this.$PubcontentFeedChainingController24(cb,db);if(!eb)return false;var fb=ka.getURIBuilder().setIntVector('pivotal_topic_ids',db.pivotal_topic_ids).getURI();new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,eb.story.id)).setRelativeTo(eb.chainingWrapper).setURI(fb).send();return true;};bb.prototype.$PubcontentFeedChainingController31=function(cb,db){'use strict';var eb=this.$PubcontentFeedChainingController24(cb,db);if(!eb)return false;var fb=ea.getURIBuilder().setInt('event_id',db.event_id).setString('attachment_id',o.getID(cb)).getURI();new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,eb.story.id)).setRelativeTo(eb.chainingWrapper).setURI(fb).send();return true;};bb.prototype.$PubcontentFeedChainingController32=function(cb,db){'use strict';var eb=this.$PubcontentFeedChainingController24(cb,db);if(!eb)return false;var fb=fa.getURIBuilder().setString('origin',db.origin).setString('content_id',String(db.content_id));new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,eb.story.id)).setRelativeTo(eb.chainingWrapper).setURI(fb.getURI()).setAllowCrossPageTransition(true).send();return true;};f.exports=bb;},null);
__d('PubcontentLitestandClassicChainingController',['ContextualThing','DOM','PubcontentFeedChainingController','csx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=j;m=l&&l.prototype;Object.assign(n,l);n.prototype=Object.create(l.prototype);n.prototype.constructor=n;n.__superConstructor__=l;n.prototype.findStory=function(o){'use strict';var p="^div._4-u2",q=i.scry(o,p);return q.length===1?q[0]:null;};n.prototype.isSponsoredStory=function(o){'use strict';var p="._5paw";return i.scry(o,p).length>0;};n.prototype.findAttachment=function(o){'use strict';var p="div._6m2",q="div.iframeEmbed",r=i.scry(o,p)[0]||i.scry(o,q)[0];return r;};n.prototype.findContainer=function(o){'use strict';var p=i.create('div'),q=i.insertAfter(o,p);h.register(p,o);return q.length>=1?q[0]:null;};n.prototype.findStreamRoot=function(o){'use strict';var p="^div._4ikz";return i.scry(o,p)[0];};n.prototype.findAdClientToken=function(o){'use strict';var p=this.findStory(o);if(!p)return null;var q=p.getAttribute('data-ft');if(!q)return null;var r=JSON.parse(q);return r[j.getAdClientTokenIndex()];};n.prototype.init=function(){'use strict';this.registerEvents();};function n(){'use strict';l.apply(this,arguments);}f.exports=new n();},null);
__d("XFacebarBootloadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/typeahead\/search\/facebar\/bootload\/",{placeholder_id:{type:"String"}});},null,{});
__d('FacebarPlaceholderShortcut',['KeyEventController','Run','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l){'use strict';this._input=l;this._listener=null;}k.prototype.enable=function(){'use strict';this._registerListener();};k.prototype._registerListener=function(){'use strict';this._listener&&this._listener.remove();this._listener=h.registerKey('SLASH',this._handleKeydown.bind(this));i.onLeave((function(){j(this._registerListener.bind(this),0);}).bind(this));};k.prototype.disable=function(){'use strict';this._listener&&this._listener.remove();this._listener=null;};k.prototype._handleKeydown=function(l){'use strict';this._input.focus();return false;};f.exports=k;},null);
__d('FacebarBootloader',['AsyncRequest','CSS','Event','$','Run','BanzaiODS','SubscriptionsHandler','getActiveElement','XFacebarBootloadController','FacebarPlaceholderShortcut'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r='facebar_bootloader',s=r+'_',t={isRequested:false,isFocused:false,isInitialized:false,init:function(u,v,w,x){this.reset();this.subscriptions=new n();this.placeholderID=w;this.searchInput=u;this.shortcutHandler=new q(u);this.loadingIndicator=v;this.shortcutHandler.enable();this.subscriptions.addSubscriptions(j.listen(u,'focus',(function(){this.requestSearch();this.showLoadingIndicator();}).bind(this)),j.listen(k(w),'mouseover',this.requestSearch.bind(this)));if(x)this.subscriptions.addSubscriptions(j.listen(window,'load',this.requestSearch.bind(this)));l.onUnload(this.reset.bind(this));this.isInitialized=true;if(u.value||o()==u){this.requestSearch();this.showLoadingIndicator();}},showLoadingIndicator:function(){if(this.loadingIndicator)i.show(this.loadingIndicator);},reset:function(){this.subscriptions&&this.subscriptions.release();this.shortcutHandler&&this.shortcutHandler.disable();this.searchInput=this.subscriptions=this.shortcutHandler=null;this.loadingIndicator=null;this.isRequested=this.isFocused=false;},requestSearch:function(){if(o()==this.searchInput&&!this.isFocused){this.isFocused=true;this.focusTime=Date.now();}if(this.isRequested||!this.isInitialized)return;this.isRequested=true;var u=p.getURIBuilder().setString('placeholder_id',this.placeholderID).getURI(),v=new h();v.setURI(u).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setErrorHandler(function(w){m.bumpEntityKey(r,s+'request_failed');if(w&&w.errorSummary){m.bumpEntityKey(r,s+'request_failed_'+w.errorSummary);}else m.bumpEntityKey(r,s+'request_failed_no_error_summary');this.isRequested=false;}).send();},setFocus:function(u,v,w){if(!this.searchInput)return;m.bumpEntityKey(r,s+'response_arrived');if(this.searchInput.value||this.isFocused){u.getCore().isFocused=true;u.getCore().input.setValue(w.fromString(this.searchInput.value),true);u.getCore().setStartTime(this.focusTime);v.focus();v.setSelection({length:this.searchInput.selectionEnd-this.searchInput.selectionStart,offset:this.searchInput.selectionStart});v.togglePlaceholder();}this.reset();}};f.exports=t;},null);
__d("XShareNowCounterController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/share\/share_now\/counter\/",{event:{type:"Enum",required:true,enumType:1},control:{type:"Bool",defaultValue:false}});},null,{});
__d('ShareNowCounter',['AsyncSignal','XShareNowCounterController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={logEvent:function(event,k){var l=i.getURIBuilder().setEnum('event',event).setBool('control',k).getURI();new h(l).send();}};f.exports=j;},null);
__d('ShareNowController',['Dialog','Event','ShareNowCounter','ShareNowCounterEvent','ShareNowConstants'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n={initMenu:function(o){var p=o.getTriggerElem();i.listen(p,'success',(function(event){try{var r=event.data.response.payload;if(r.share_now_succeeded)this.showSuccess(r.message);}catch(q){}}).bind(this));i.listen(p,'error',(function(event){try{this.showError(event.data.response.errorDescription);}catch(q){this.showError();}}).bind(this));o.getPopover().subscribe('show',this._logMenuShown);},showSuccess:function(o){this.showDialog(o||l.success);},showError:function(o){this.showDialog(o||l.error);},showDialog:function(o){if(m)m.destroy();m=new h().setBody(o).setAutohide(2500).setModal(true).show();},_logMenuShown:function(){j.logEvent(k.OPEN_SHARE_NOW);}};f.exports=n;},null);
__d('FeedAdsGapRuleViolationDetection',['Banzai','CSS','csx','cx','DOM','ge','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=Object.assign||function(da){for(var ea=1;ea<arguments.length;ea++){var fa=arguments[ea];for(var ga in fa)if(Object.prototype.hasOwnProperty.call(fa,ga))da[ga]=fa[ga];}return da;},p='ei',q='qid',r='gap rule violation',s='non violating ads gap',t='first position violation',u='feed load',v='first position invalidation',w='spacing invalidation',x=[],y=[],z=[],aa={},ba={},ca={registerFeedStories:function(da,ea){if(da.containerID=='substream_0'){x=[];y=[];}var fa=m(da.containerID);if(!fa)return;aa=o({},da.demoAdChecks,aa);var ga=l.scry(fa,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(ia){return ia!==null;});if(da.isLoggingEnabled&&ga.length!==0)this._logFeedLoad();if(da.isNewerStories){x=ga.concat(x);}else x=x.concat(ga);for(var ha in da.minGaps)if(da.minGaps.hasOwnProperty(ha))ba[ha]=da.minGaps[ha];if(n(aa)){if(da.isLoggingEnabled||da.isFirstPosInvalidationEnabled)this._checkFirstPosViolation(da,fa);if(da.isLoggingEnabled||da.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(da);}},_convertStoryNodeToObject:function(da){if(i.hasClass(da,"_170y"))return null;var ea=da.getAttribute('data-dedupekey');if(aa[ea])return null;var fa=l.scry(da,"div._hye"),ga=l.scry(da,"li._170x"),ha=[];if(fa.length!==0){ha=fa.map(function(ka){return ka.getAttribute('data-ft');}).filter(function(ka){return ka!==null;});}else if(ga.length!==0){ha=ga.map(function(ka){return ka.getAttribute('data-ft');}).filter(function(ka){return ka!==null;});}else if(da.getAttribute('data-ft'))ha=[da.getAttribute('data-ft')];if(!ha.length)return null;var ia=JSON.parse(ha[0]),ja={dataFTArray:ha,dedupKey:ea,isSponsored:!!ia[p],height:da.offsetHeight,qid:parseInt(ia[q],10),nodeID:da.id};return ja;},_checkFirstPosViolation:function(da,ea){while(x.length>0&&x[0].isSponsored){var fa={ftArray:x[0].dataFTArray,qid:x[0].qid,nodeid:x[0].nodeID,firstStoryType:da.firstStoryType},ga=l.scry(ea,'.uiBoxRed')[0];if(ga){var ha=ga.textContent||ga.innerText;if(ha)fa.error_msg=ha;}if(da.isLoggingEnabled&&!(x[0].dedupKey in z)){this._logFirstPosViolation(fa);z[x[0].dedupKey]=fa;}if(da.isFirstPosInvalidationEnabled){this._invalidateFirstPosAd(fa);x.splice(0,1);}else break;}},_getMinGap:function(da,ea,fa){var ga=Math.min(da?da:Number.MAX_VALUE,ea?ea:Number.MAX_VALUE);return ga!==Number.MAX_VALUE?ga:fa;},_getStoryDedupKeysJSONString:function(da,ea){var fa=[];for(var ga=da;ga<=ea;ga++)fa.push(x[ga].dedupKey);return JSON.stringify(fa);},_getIdxOfStoryToSwap:function(da,ea){if(ea>=x.length-da)return -1;for(var fa=da+1;fa<x.length&&ea>0;fa++){if(!x[fa].isSponsored){ea--;}else return -1;if(ea===0)return fa;}return -1;},_checkGapRuleViolation:function(da){var ea=null,fa=null,ga=0;for(var ha=0;ha<x.length;ha++){var ia=x[ha];ga+=ia.height;if(ia.isSponsored){ga-=ia.height;var ja=false,ka=false;if(ea!==null){var la=ha-ea,ma=null,na=this._getMinGap(ba[fa.dedupKey],ba[ia.dedupKey],da.defaultMinGap);if(la<na){ma=r;}else ma=s;var oa={ftArray_A:fa.dataFTArray,ftArray_B:ia.dataFTArray,dist:la,pdist:ga,pos:ha+1,qid_A:fa.qid,qid_B:ia.qid,event_type:ma,nodeid:ia.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(ea,ha)};if(da.isLoggingEnabled)if(!(ia.dedupKey in y)||y[ia.dedupKey].event_type!==ma){this._logAdsGapEvent(oa);y[ia.dedupKey]=oa;}if(da.isGapRuleInvalidationEnabled&&ma==r){var pa=-1;if(da.isSwapOnGapRuleViolationEnabled)pa=this._getIdxOfStoryToSwap(ha,na-la);if(pa>0){this._shiftAdBelowOrganicStory(ia.nodeID,x[pa].nodeID);var qa=x[ha];x.splice(ha,1);x.splice(pa,0,qa);if(da.isLoggingEnabled){var ra={ft:x[pa].dataFTArray[0],dist:pa-ha,qid:x[pa].qid,event_type:'ad_swap'};h.post('feed_ads_gap_rule_violation',ra);}ka=true;ia=x[ha];ga+=ia.height;}else if(da.isGapRuleInvalidationEnabled){this._invalidateGapRuleViolatedAd(oa);ja=true;x.splice(ha--,1);}}}if(!ja&&!ka){ea=ha;fa=ia;ga=0;}}}},_logFirstPosViolation:function(da){var ea={ft:da.ftArray[0],event_type:t,intValues:{qid:da.qid},first_story_type:da.firstStoryType};if(da.error_msg)ea.error_msg=da.error_msg;h.post('feed_ads_gap_rule_violation',ea);},_logAdsGapEvent:function(da){var ea={ft_A:da.ftArray_A[0],ft_B:da.ftArray_B[0],event_type:da.event_type,intValues:{dist:da.dist,pdist:da.pdist,pos:da.pos,qid_A:da.qid_A,qid_B:da.qid_B},dedup_keys:da.dedupKeys};h.post('feed_ads_gap_rule_violation',ea);},_logFeedLoad:function(){var da={event_type:u};h.post('feed_ads_gap_rule_violation',da);},_invalidateFirstPosAd:function(da){i.hide(m(da.nodeid));var ea={ft_array:da.ftArray,event_type:v};h.post('feed_ads_gap_rule_violation',ea);},_invalidateGapRuleViolatedAd:function(da){var ea=m(da.nodeid);ea&&i.hide(ea);var fa={ft_array_A:da.ftArray_A,ft_array_B:da.ftArray_B,event_type:w};h.post('feed_ads_gap_rule_violation',fa);},_shiftAdBelowOrganicStory:function(da,ea){var fa=m(da),ga=m(ea);fa&&ga&&l.insertAfter(ga,fa);}};f.exports=ca;},null);
__d('FeedErrorDetection',['Banzai','DOM','csx','ge'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=0,m={},n=false,o=false;function p(event,r,s,t){var u={event:event,shouldLogDetail:r,site:'www'};if(r){u.intValues=s;u.normalValues=t;}h.post('feed_error_detection',u,{delay:0});}var q={registerFeedStories:function(r,s){if(r=='substream_0'){l=0;m={};n=false;o=false;}var t=i.scry(k(r),"._5jmm"),u=t.length;if(!u&&!n){if(!o){o=true;return;}if(!l){p('empty_feed_js',s,{},{});}else p('end_of_feed_js',s,s?{stories_count:l}:{},{});n=true;return;}o=false;for(var v=0;v<u;v++){var w=t[v],x=w.getAttribute('data-dedupekey'),y=w.getAttribute('data-ft');if(!x||!y)continue;if(x in m){var z={};if(s)z={dedupKey:x,ft_A:y,ft_B:m[x]};p('duplicate_stories',s,{},{dup_field:z});}else{m[x]=y;l++;}}}};f.exports=q;},null);
__d('StoryPositionTracking',['DOM','LitestandStream','csx','ge'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=0;function m(p,q){var r=JSON.parse(p.getAttribute('data-ft'));if(r){r.insertion_position=q;p.setAttribute('data-ft',JSON.stringify(r));}}function n(p){return h.scry(p,"._5jmm");}var o={registerNewStories:function(p){if(p=='substream_0')l=0;var q=n(k(p)),r=q.length;for(var s=0;s<r;s++)m(q[s],l++);},updateAllStories:function(){var p=n(i.getStreamRoot()),q=p.length;l=0;for(var r=0;r<q;r++)m(p[r],l++);}};f.exports=o;},null);
__d('StreamViewportTracking',['DOM','DOMDimensions','ViewportTracking','ge','recordTNTreeData'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n,o=51;m=j;n=m&&m.prototype;Object.assign(p,m);p.prototype=Object.create(m.prototype);p.prototype.constructor=p;p.__superConstructor__=m;p.prototype.init=function(q,r){'use strict';if(r)this.$StreamViewportTracking1=r;n.init.call(this,q);this.initSubscriptions();};p.prototype.initSubscriptions=function(){'use strict';};p.prototype.getDataFromConfig=function(q){'use strict';this.isTimetrackingEnabled=1;this.timeout=q.record_delay;};p.prototype.getTimeout=function(){'use strict';return this.timeout;};p.prototype.getStorySelector=function(){'use strict';return '.uiStreamStory';};p.prototype.getAllStories=function(){'use strict';var q=h.scry(this.getStream(),this.getStorySelector());return q.filter(function(r){return r.getAttribute('data-ft');});};p.prototype.getStoryID=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.mf_story_key;};p.prototype.getQueryID=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.qid;};p.prototype.getFBFeedLocations=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.fbfeed_location;};p.prototype.getFBFeedInsertionPosition=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.insertion_position;};p.prototype.getDataToLog=function(q){'use strict';var r={},s=this.getStream();r=l(q,s);var t=q.getAttribute('data-insertion-position');if(t!==null)r.inspos=t;r.evt=o;r.vpv_time=Math.round(Date.now()/1000);var u=h.scry(q,".fbStoryAttachmentImage")[0];if(u){var v=i.getElementDimensions(u);r.story_image_height=v.height;r.story_image_width=v.width;}return {ft:r};};p.prototype.getStream=function(){'use strict';if(this.$StreamViewportTracking1)return this.$StreamViewportTracking1;return k('home_stream');};p.prototype.heartBeatIsEnabled=function(){'use strict';return true;};p.init=function(q,r){'use strict';p.instance=new p();p.instance.init(q,r);};p.getInstance=function(){'use strict';return p.instance;};function p(){'use strict';m.apply(this,arguments);}f.exports=p;},null);
__d('FbFeedAttachmentRelatedShare',['Arbiter','AttachmentRelatedShareConstants','DOMQuery','Event','tidyEvent','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={loadRelatedAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.ARTICLE_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedGameAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.GAME_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedAttachmentForStream:function(o){var p=function(event,q){var r=event.getTarget();if(r.getAttribute('target')!=='_blank')return;var s="^div._5pbx",t="^div._5pc9",u=j.scry(r,s)[0]||j.scry(r,t)[0];if(!u)return;h.inform(i.ARTICLE_CLICK,{attachment:u,global_share_id:0,link_url:r.getAttribute('href'),is_right_click:q});};l(k.listen(o,'click',function(event){p(event,false);}));l(k.listen(o,'mousedown',function(event){if(event.which==3||event.button==2)p(event,true);}));}};f.exports=n;},null);
__d('FbFeedCommentUFIScroller',['Arbiter','DOMScroll','containsNode','ge'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();h.subscribe('comment/focus',function(l,m){var n=m.element,o=k('content');if(o&&j(o,n))i.ensureVisible(n,null,60,250);});f.exports={};},null);
__d('FbFeedHighlight',['JSXDOM','CSS','DOM','DOMScroll','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=1000,n=1000,o=null;function p(){return (h.div({className:"_1usz"},h.div({className:"_1us-"}),h.div({className:"_1us_"}),h.div({className:"_1ut0"}),h.div({className:"_1ut1"})));}var q={highlightAndScrollTo:function(r){q.highlight(r);q.scrollTo(r);},highlightSingle:function(r){var s=p();j.appendContent(r,s);setTimeout(function(){if(o)j.remove(o);o=s;i.addClass(r,"_1ut2");},0);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(function(){j.remove(s);if(s==o)o=null;},m+n);},m+n);},highlight:function(r){var s=q.highlightPermanent(r);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(j.remove.bind(null,s),m+m);},m+n);},highlightPermanent:function(r){var s=p();j.appendContent(r,s);setTimeout(i.addClass.bind(null,r,"_1ut2"),0);return s;},scrollTo:function(r){setTimeout(k.scrollTo.bind(null,r),0);}};f.exports=q;},null);
__d('FbFeedKeyboardController',['CSS','DOM','DOMQuery','FeedBaseKeyboardController','Focus','JSXDOM','Parent','FbFeedHighlight','csx','cx','ge','getActiveElement'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t,u;function v(y){if(y.previousElementSibling)return y.previousElementSibling;y=y.previousSibling;while(y&&!j.isElementNode(y))y=y.previousSibling;return y||null;}function w(y){if(y.nextElementSibling)return y.nextElementSibling;y=y.nextSibling;while(y&&!j.isElementNode(y))y=y.nextSibling;return y||null;}t=k;u=t&&t.prototype;Object.assign(x,t);x.prototype=Object.create(t.prototype);x.prototype.constructor=x;x.__superConstructor__=t;x.prototype.getStories=function(y){'use strict';return j.scry(y||this.root,"._5jmm");};x.prototype.isHoldoutStory=function(y){'use strict';return !!y&&h.hasClass(y,'holdoutAdStory');};x.prototype.isRelevantStory=function(y){'use strict';return j.isElementNode(y)&&!this.isHoldoutStory(y);};x.prototype.isStory=function(y){'use strict';return h.hasClass(y,"_5jmm");};x.prototype.clickLike=function(){'use strict';this.click('.UFILikeLink');var y=this.getParentStory(s());if(y){var z=j.scry(y,'.UFILikeLink');for(var aa=0;aa<z.length;aa++)if(!h.hasClass(z[aa],'accessible_elem'))l.setWithoutOutline(z[aa]);}};x.prototype.clickComment=function(){'use strict';this.click('.comment_link');};x.prototype.clickShare=function(){'use strict';this.click('.share_action_link');};x.prototype.clickSeeMore=function(){'use strict';this.click('.see_more_link');};x.prototype.clickLeft=function(){'use strict';this.click("._1mri");};x.prototype.clickRight=function(){'use strict';this.click("._2fu-");};x.prototype.openAttachment=function(){'use strict';this.click("._5dec","a._52c6","._4-eo",'.uiVideoThumb');};x.prototype.getHeadline=function(y){'use strict';return j.scry(y,"h5._5pbw")[0];};x.prototype.$FbFeedKeyboardController1=function(y){'use strict';var z=n.byClass(y,"_5pcb"),aa=r('pagelet_soft_permalink_posts');return !!(z||aa&&i.contains(aa,y));};x.prototype.getPreviousSibling=function(y){'use strict';var z=v(y);if(z&&this.getParentStory(z))return z;z=null;if(this.$FbFeedKeyboardController1(y)){var aa=this.getStories(this.root),ba=aa.indexOf(y);while(ba>-1){if(ba===0){z=r('pagelet_composer');z=z&&n.byClass(z,"_5jmm");}else if(ba>0){z=aa[ba-1];if(z.offsetHeight>0)break;}ba--;}}return z||this.selected;};x.prototype.getPreviousStory=function(y){'use strict';var z=this.getPreviousSibling(y);while(z&&!this.isStory(z))z=this.getPreviousSibling(z);return z;};x.prototype.getParentStory=function(y){'use strict';return n.byClass(y,"_5jmm");};x.prototype.getNextSibling=function(y){'use strict';var z=w(y);if(z&&this.getParentStory(z))return z;z=null;if(this.$FbFeedKeyboardController1(y)){var aa=this.getStories(this.root),ba=aa.indexOf(y);if(ba>-1){z=aa[++ba];while(z&&z.offsetHeight===0)z=aa[++ba];}}else if(r('pagelet_composer',y))z=j.scry(document,"div._5pcb ._5jmm")[0];return z||this.selected;};x.prototype.getNextStory=function(y){'use strict';var z=this.getNextSibling(y);while(z&&!this.isStory(z))z=this.getNextSibling(z);return z;};x.prototype.setSelected=function(y,z){'use strict';if(y){var aa="_5qdu",ba=j.scry(y,"._5qdu");if(!ba.length&&z)i.prependContent(y,m.div({className:aa}));}if(z){this.selected&&this.setTabindexOnStory(this.selected,'-1');this.selected&&h.removeClass(this.selected,"_5qdv");this.selected=y;y&&this.setTabindexOnStory(y,'0');y&&h.addClass(y,"_5qdv");o.highlightSingle(y);}};x.init=function(y){'use strict';new x(y);};function x(){'use strict';t.apply(this,arguments);}f.exports=x;},null);
__d('FbFeedViewportTracking',['Arbiter','LitestandMessages','LitestandStream','StreamViewportTracking','csx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=k;n=m&&m.prototype;Object.assign(o,m);o.prototype=Object.create(m.prototype);o.prototype.constructor=o;o.__superConstructor__=m;o.prototype.initSubscriptions=function(){'use strict';this.subscriptions.addSubscriptions(h.subscribe([i.STORIES_INSERTED],this.invalidateAllStoriesCache.bind(this)),h.subscribe(i.LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};o.prototype.getStorySelector=function(){'use strict';return "._5jmm";};o.prototype.getStream=function(){'use strict';return j.getStreamRoot();};o.prototype.getSessionID=function(){'use strict';return j.getFeedStreamID();};o.init=function(p){'use strict';o.instance=new o();o.instance.init(p);};o.getInstance=function(){'use strict';return o.instance;};function o(){'use strict';m.apply(this,arguments);}f.exports=o;},null);